<!DOCTYPE html>



<html lang="en">
<head>

    


    


<title>
    Configuration
</title>
<meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">



<link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,700,300,400" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="http://seedstack.org/assets/unify/css/style.css">
<link rel="stylesheet" href="http://seedstack.org/assets/unify/plugins/font-awesome/css/font-awesome.css">
<link rel="stylesheet" href="http://seedstack.org/css/style.css">



<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "url": "http://seedstack.org",
  "logo": "http://seedstack.org/img/logos/seedstack.png"
}
</script>



<meta property="og:title" content='Configuration' />
<meta property="og:description" content="SeedStack provides a simple and powerful configuration system. Configuration can be read from multiple sources and in
multiple formats. The recommended way to specify configuration is a YAML file
named application.yaml located at the root of the classpath." />
<meta property="og:url" content="http://seedstack.org/docs/core/configuration/" />
<meta property="og:site_name" content="SeedStack" />
<meta property="og:image" content="http://seedstack.org/img/opengraph.png" />



<link rel="search" type="application/opensearchdescription+xml" href="http://seedstack.org/opensearch.xml" title="SeedStack" />



<link rel="apple-touch-icon" sizes="57x57" href="http://seedstack.org/img/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="http://seedstack.org/img/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://seedstack.org/img/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="http://seedstack.org/img/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://seedstack.org/img/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="http://seedstack.org/img/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="http://seedstack.org/img/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="http://seedstack.org/img/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://seedstack.org/img/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="http://seedstack.org/img/favicons/manifest.json">
<meta name="apple-mobile-web-app-title" content="SeedStack">
<meta name="application-name" content="SeedStack">
<meta name="msapplication-TileColor" content="#00a300">
<meta name="msapplication-TileImage" content="/img/favicons/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">



<script type="text/javascript">
    window.seedstack = {
        baseUrl: "http:\/\/seedstack.org\/",
        state: {}
    };
</script>


</head>
<body class="homepage">
    
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5R5FP9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5R5FP9');</script>


    <div id="header">
        
    

<div class="header">
    <div class="container">
        <a class="logo" href="http://seedstack.org/">SeedStack</a>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="fa fa-bars"></span>
        </button>
    </div>
    <div class="collapse navbar-collapse navbar-responsive-collapse" data-role="navigation" style="pointer-events: none;">
        <div class="container">
            <ul class="nav navbar-nav" style="pointer-events: auto;">
                <li class='active'>
                    <a href="http://seedstack.org/docs">Documentation</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/guides">Guides</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/addons">Add-ons</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/posts">News</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/community">Community</a>
                </li>
                <li class='dropdown '>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">
                        More
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="http://seedstack.org/glossary">Glossary</a></li>
                        <li><a href="http://seedstack.org/tags">Tags</a></li>
                        <li><a href="http://seedstack.org/project">Project info</a></li>
                        <li><a target="_blank" href="http://seedstack.org/javadoc"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> Javadoc</a></li>
                        <li><a target="_blank" href="https://github.com/seedstack/distribution/releases"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> Releases</a></li>
                        <li><a target="_blank" href="https://github.com/seedstack"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> GitHub</a></li>
                    </ul>
                </li>
                <li>
                    <i class="search fa fa-search search-btn"></i>
                    <div class="search-open">
                        <form method="GET" action="http://seedstack.org/search">
                            <div class="input-group animated fadeInDown">
                                <input id="search-field" type="text" class="form-control" placeholder="Search" name="q">
                                <span class="input-group-btn">
                                    <button class="btn-u" type="submit">Go</button>
                                </span>
                            </div>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>


        
    

<div class="title-header small">
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12">
                <h1>Documentation</h1>
                <p class="hidden-xs">
                    Learn everything about SeedStack.
            </div>
            <div class="col-md-3 hidden-sm hidden-xs">
                <div class="header-image-wrapper">
                    <img class="header-image" src="/img/logos/glossary-logo.svg">
                </div>
            </div>
        </div>
    </div>
</div>
<div class="title-subheader">
    <div class="container">
        <ul>
            <li>
                <span class='active'>
                    <i class="fa fa-dot-circle-o"></i> <a href="http://seedstack.org/docs">Core</a>
                </span>
            </li>
            <li>
                <span class=''>
                    <i class="fa fa-briefcase"></i> <a href="http://seedstack.org/docs/business">Business</a>
                </span>
            </li>
            <li>
                <span class=''>
                    <i class="fa fa-cog"></i> <a href="http://seedstack.org/docs/maven-plugin">Maven plugin</a>
                </span>
            </li>
            <li>
                <span class=''>
                    <i class="fa fa-gift"></i> <a href="http://seedstack.org/docs/samples">Samples</a>
                </span>
            </li>
            <li>
                <span>
                    <i class="fa fa-medkit"></i> <a target="_blank" href="http://seedstack.org/docs/troubleshooting">Troubleshooting</a>
                </span>
            </li>
            <li>
                <span>
                    <i class="fa fa-coffee"></i> <a target="_blank" href="http://seedstack.org/javadoc">Javadoc</a>
                </span>
            </li>
            
            <li class="pull-right">
                <span class="menu-toggle" style="" data-toggle="collapse" data-target=".side-menu-collapse">
    <span class="sr-only">Toggle menu</span>
    <i class="fa fa-bars"></i>
</span>

            </li>
            
        </ul>
    </div>
</div>

    </div>
    <div id="content" class="container">
        <div class="row">
    
    <div class="col-md-3">
        












<nav class="side-menu collapse side-menu-collapse" data-role="navigation">
    <div class="list-group">
        <ul class="nav">
            
            
            <li class="list-group-header">
                <a href="/docs/basics/" class="" data-target=".the-basics">The Basics</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/basics/" class="">
                            Getting Started
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/learn-the-basics/" class="">
                            Learn the Basics
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/learn-the-basics\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/dependency-injection/" class="">
                            Dependency Injection
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/dependency-injection\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/business/" class="">
                            Business Code
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/business\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/persistence/" class="">
                            Persistence
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/persistence\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/rest/" class="">
                            REST API
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/rest\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/testing/" class="">
                            Testing
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/testing\/';
                        </script>
                    
                    
                </ul>
            </li>
            
            </li>
            
            <li class="list-group-header">
                <a href="/docs/core/" class=" active" data-target=".core">Core</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/core/" class="">
                            Running Applications
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/core\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/testing/" class="">
                            Integration Testing
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/core\/testing\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/configuration/" class="active">
                            Configuration
                        </a>
                        
                    </li>
                    
                    
                        
                        
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/logging/" class="">
                            Logging
                        </a>
                        
                    </li>
                    
                        
                        
                        <script>
                            seedstack.state.nextPage = '\/docs\/core\/logging\/';
                        </script>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/security/" class="">
                            Security
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/crypto/" class="">
                            Cryptography
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/transactions/" class="">
                            Transactions
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/validation/" class="">
                            Validation
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/jndi/" class="">
                            JNDI
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/proxy/" class="">
                            Proxy
                        </a>
                        
                    </li>
                    
                    
                    
                    
                </ul>
            </li>
            
            </li>
            
            <li class="list-group-header">
                <a href="/docs/cli/" class="" data-target=".command-line">Command-Line</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/cli/" class="">
                            Running CLI Applications
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/cli/commands/" class="">
                            Defining Commands
                        </a>
                        
                    </li>
                    
                    
                    
                    
                </ul>
            </li>
            
            </li>
            
            <li class="list-group-header">
                <a href="/docs/web/" class="" data-target=".web">Web</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/web/" class="">
                            Running Web Applications
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/testing/" class="">
                            Web Integration Testing
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/rest/" class="">
                            REST
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/cors/" class="">
                            CORS
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/security/" class="">
                            Web Security
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/servlets/" class="">
                            Servlet, Filters and Listeners
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/static-resources/" class="">
                            Static Resources
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/websockets/" class="">
                            WebSockets
                        </a>
                        
                    </li>
                    
                    
                    
                    
                </ul>
            </li>
            
            </li>
            
        </ul>
    </div>
</nav>



    </div>
    <div class="col-md-9">
    
        <div class="content-wrapper">
            <div class="doc-content">
                <h1 class="nocount">Configuration</h1>
                <p>SeedStack provides a simple and powerful configuration system. Configuration can be read from multiple sources and in
multiple formats. The recommended way to specify configuration is a <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> file
named <code>application.yaml</code> located at the root of the classpath.</p>

<h2 id="sources">Sources</h2>

<p>Configuration is read from multiple predefined sources, merged into a unique global configuration tree. Other sources can
be provided by add-ons.</p>

<h3 id="base">Base</h3>

<p>Base configuration is read from an <code>application.yaml</code> file at the root of the classpath:</p>

<pre><code class="language-plain">src/main/resources
    └ application.yaml
</code></pre>

<p>Base configuration is the easiest way of specifying configuration and should be enough for most applicative needs.
If multiple JAR files or classpath directories contain an <code>application.yaml</code> file, they are all merged together in
an undefined order.</p>

<h3 id="auto-discovered">Auto-discovered</h3>

<p>Auto-discovered configuration is read from <code>*.yaml</code> files discovered under the <code>META-INF/configuration</code> classpath location:</p>

<pre><code class="language-plain"> src/main/resources
     └ META-INF
         └ configuration
            ├ file1.yaml
            ├ file2.yaml
            └ ...         
</code></pre>

<p>Auto-discovered configuration is useful to embed configuration in reusable modules as it will be automatically discovered
and merged into the global configuration when this module is used. There is no restriction on file names.</p>

<p>Auto-discovered configuration has a lower precedence than base configuration and can be overridden by it.</p>

<h3 id="command-line">Command-line</h3>

<p>Command-line configuration is gathered from system properties prefixed by <code>seedstack.config</code>:</p>

<pre><code>java -Dseedstack.config.someConfig.string=someValue -jar app.jar
</code></pre>

<p>This will define the following configuration tree:</p>

<pre><code class="language-yaml">someConfig:
    string: someValue
</code></pre>

<p>Command-line configuration has a higher precedence than base configuration and will override it.</p>

<h3 id="environment-variables">Environment variables</h3>

<p>Environment variables configuration is gathered from all environment variables and put under the <code>env</code> node:</p>

<pre><code class="language-yaml">env:
    ENV_VARIABLE_1: value1
    ENV_VARIABLE_2: value2
    ...
</code></pre>

<p>As such, to reference the environment variable <code>ENV_VARIABLE_1</code> a <a href="#macros">macro</a> can be used: <code>${env.ENV_VARIABLE_1}</code>. Environment
variables have the maximum precedence and cannot be overridden.</p>

<h3 id="system-properties">System properties</h3>

<p>System properties configuration is gathered from all Java system properties and put under the <code>sys</code> node:</p>

<pre><code class="language-yaml">sys:
    file.encoding: UTF-8
    some.system.property: value1
    some.other.system.property: value2
    ...
</code></pre>

<p>As such, to reference the environment variable <code>file.encoding</code> a <a href="#macros">macro</a> can be used: <code>${sys.file\.encoding}</code>. System properties
have the maximum precedence and cannot be overridden.</p>

<div class="callout callout-warning">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
            
                <i class="fa fa-exclamation-triangle icon-2x"></i>
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>Some default system properties (like <code>java.vendor</code>) have a value and simultaneously serve as prefix for other keys (like
<code>java.vendor.url</code>). This cannot be mapped as a valid configuration tree, so they are mapped as flat properties under the
<code>sys</code> node. You must escape the property dots with a backslash (<code>\</code>) when specifying the path to such keys.</p>

<p>In this example, you can access the <code>file.encoding</code> property with the <code>sys.file\.encoding</code> path.</p>

        </div>
    </div>
</div>

<h3 id="priority">Priority</h3>

<p>The priority order of the sources is, from highest to lowest:</p>

<ul>
<li>System properties,</li>
<li>Environment variables,</li>
<li>Command-line configuration,</li>
<li>Base configuration,</li>
<li>Auto-discovered configuration.</li>
</ul>

<h2 id="usage">Usage</h2>

<p>Consider the following Java class:</p>

<pre><code class="language-java">@Config(&quot;someConfig&quot;)
public class MyConfig {
    @NotBlank
    private String string = &quot;defaultValue&quot;;
    private int[] array;
    private InnerConfig object = new InnerConfig();
    
    public static class InnerConfig {            
        private List&lt;String&gt; list = new ArrayList&lt;&gt;();
    }
}
</code></pre>

<p>This can be mapped from the following <code>application.yaml</code> file:</p>

<pre><code class="language-yaml">someConfig:
  string: Hello World!
  array: [1, 2, 3]
  object:
    list: [iris, jasmine, kiwi]
</code></pre>

<h3 id="declarative-api">Declarative API</h3>

<p>To inject configuration objects, use the <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;Configuration' href='http://seedstack.org/javadoc/org/seedstack/seed/Configuration.html'>@Configuration</a></code> annotation:</p>

<pre><code class="language-java">public class SomeClass {
    @Configuration
    private MyConfig myConfig;
}
</code></pre>

<p>This will map the global configuration to an instance of the <code>MyConfig</code> class and inject it into the field. You can
specify the following parameters on the annotation:</p>

<ul>
<li><code>value</code>: this string can be used to specify the path of the configuration node to map. If a <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;coffig.&amp;#8203;Coffig' href='http://seedstack.org/javadoc/org/seedstack/coffig/Coffig.html'>Coffig</a></code>
annotation is present on the mapped class, the path can be omitted.</li>
<li><code>mandatory</code>: if true, an exception will be thrown when the configuration node is missing; if false the behavior
will depend upon the parameter below.</li>
<li><code>injectDefault</code>: only applies when the configuration node is missing and <code>mandatory</code> is false. If true a default
value will be injected; if false the field will be left as-is allowing to customize the default value.</li>
</ul>

<p>If you don&rsquo;t want to define configuration objects, you can still map individual tree nodes:</p>

<pre><code class="language-java">public class SomeClass {
    @Configuration(&quot;someConfig.string&quot;)
    private String someString; // will be &quot;Hello World!&quot;
    
    @Configuration(&quot;someConfig.array[1]&quot;)
    private int someInt; // will be 2
    
    @Configuration(value = &quot;someConfig.object.list[1]&quot;, mandatory = true)
    private String otherString; // will be &quot;jasmine&quot;
    
    @Configuration(value = &quot;unknownProperty&quot;, injectDefault = false)
    private String defaultValue = &quot;default&quot;; // will be &quot;default&quot;
}
</code></pre>

<h3 id="programmatic-api">Programmatic API</h3>

<p>To access the configuration programmatically, inject the <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;Application' href='http://seedstack.org/javadoc/org/seedstack/seed/Application.html'>Application</a></code> class and use
the <code>getConfiguration()</code> method. This will return a <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;coffig.&amp;#8203;Coffig' href='http://seedstack.org/javadoc/org/seedstack/coffig/Coffig.html'>Coffig</a></code> instance that is the API
facade of the configuration system:</p>

<pre><code class="language-java">public class SomeClass {
    @Inject
    private Application application;
    
    public void someMethod() {
        Coffig coffig = application.getConfiguration();
        
        // will be the fully mapped POJO
        MyConfig myConfig = coffig.get(MyConfig.class, &quot;someConfig&quot;);
        
        // will be &quot;Hello World!&quot;
        String someString = coffig.get(String.class, &quot;someConfig.string&quot;);   
        
        // will be 2
        int someInt = coffig.get(int.class, &quot;someConfig.array[1]&quot;);        
        
        // will be &quot;jasmine&quot;
        String otherString = coffig.getMandatory(String.class, 
                                                 &quot;someConfig.object.list[1]&quot;); 
        
        // will be &quot;default&quot;
        String defaultValue = coffig.getOptional(String.class, &quot;unknownProperty&quot;)
                                    .orElse(&quot;default&quot;); 
    }
}
</code></pre>

<h3 id="class-configuration">Class configuration</h3>

<p>It is possible to assign configuration properties to classes, individually or by package. The top-level tree node must
be named <code>classes</code>. Below that, each node having a value will denote a configuration property at its level in the package
hierarchy. Consider this example:</p>

<pre><code class="language-yaml">classes:
  org:
    myorg:
      myapp:
        appLevelProperty: value1
        domain:
          packageLevelProperty: value2
          model:
            SomeModelClass:
              classLevelProperty: value3
</code></pre>

<p>You can obtain the configuration properties assigned to a class by using the <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;Application' href='http://seedstack.org/javadoc/org/seedstack/seed/Application.html'>Application</a></code>
interface:</p>

<pre><code class="language-java">public class SomeClass {
    @Inject
    private Application application;
    
    public void someMethod() {
        ClassConfiguration&lt;SomeModelClass&gt; classConfig = 
            application.getConfiguration(SomeModelClass.class);
        
        // will be 'value1' 
        classConfig.get(&quot;appLevelProperty&quot;);     

        // will be 'value2' 
        classConfig.get(&quot;packageLevelProperty&quot;);

        // will be 'value3' 
        classConfig.get(&quot;classLevelProperty&quot;);
    }
}
</code></pre>

<ul>
<li>Class configuration properties are cumulative from the top package to the class level.</li>
<li>Specific properties (lower-level) override general (higher-level) properties with the same name.</li>
</ul>

<h2 id="mapping">Mapping</h2>

<p>The following mapping rules apply:</p>

<ul>
<li><strong>Fields are mapped by name</strong> from configuration nodes.</li>
<li><strong>When a setter is present for the field, it is used</strong> instead of direct field access.</li>
<li><strong>When a configuration node is missing for a field, the field is left untouched</strong>. This can be used to specify default values.</li>
<li>If a <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;coffig.&amp;#8203;Config' href='http://seedstack.org/javadoc/org/seedstack/coffig/Config.html'>@Config</a></code> annotation is specified on the mapped class, it is used as the default
path prefix.</li>
</ul>

<p>The following types can be mapped directly from configuration nodes:</p>

<ul>
<li>Values (primitive or objects)</li>
<li>Strings</li>
<li>Arrays</li>
<li>Lists</li>
<li>Sets</li>
<li>Maps</li>
<li>Enums</li>
<li>Optionals</li>
<li>URIs/URLs</li>
<li>Properties</li>
<li>Classes</li>
</ul>

<p>Types that don&rsquo;t have a direct mapping (i.e. not in the list above) are mapped by recursively mapping their individual
fields. The example at the top of the page is mapped like this:</p>

<ul>
<li>The <code>MyConfig</code> class cannot be mapped directly, so its fields will be enumerated and mapped individually.</li>
<li>The <code>string</code> and <code>array</code> fields are mapped directly.</li>
<li>The <code>InnerConfig</code> class cannot be mapped directly, so its fields will be enumerated and mapped individually.</li>
<li>The <code>list</code> field can be mapped directly.</li>
<li>The items of the list can be mapped directly.</li>
</ul>

<div class="callout callout-tips">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
                <i class="fa fa-lightbulb-o icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>The mapping takes into account the full type of the field, <strong>including generics</strong>. As such it is possible to properly
map complex types like:</p>

<ul>
<li><code>List&lt;URL&gt;</code>,</li>
<li><code>Class&lt;? extends SomeInterface&gt;</code>,</li>
<li>or even <code>Optional&lt;Map&lt;String, List&lt;SomeEnum&gt;&gt;&gt;</code>.</li>
</ul>

        </div>
    </div>
</div>

<h2 id="validation">Validation</h2>

<p><a href="http://beanvalidation.org/">Bean validation 1.1</a> annotations can be put on fields mapped by the configuration system.
The constraints will be automatically checked after mapping. If a constraint is violated a <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;coffig.&amp;#8203;ConfigurationException' href='http://seedstack.org/javadoc/org/seedstack/coffig/ConfigurationException.html'>ConfigurationException</a></code>
will be thrown with the details.</p>

<h2 id="profiles">Profiles</h2>

<p>One or more configuration profiles can be attached to any configuration node with the following syntax:</p>

<pre><code class="language-yaml">someConfig:
    someProperty&lt;profile1&gt;: value1
    someProperty&lt;profile2,profile3&gt;: value2
otherConfig&lt;profile3&gt;:
    otherProperty: value3
</code></pre>

<p>You can activate one or more configuration profile at application startup by specifying them in the <code>seedstack.profiles</code>
system property:</p>

<pre><code class="language-bash">java -Dseedstack.profiles=&quot;profile2,profile3&quot; ...
</code></pre>

<p>Considering the example above, if you activate <code>profile1</code>, the resulting configuration will be:</p>

<pre><code class="language-yaml">someConfig:
    someProperty: value1
</code></pre>

<p>If you activate <code>profile2</code> and <code>profile3</code>, the resulting configuration will be:</p>

<pre><code class="language-yaml">someConfig:
    someProperty: value2
otherConfig:
    otherProperty: value3
</code></pre>

<h2 id="macros">Macros</h2>

<p>Macros are references to other nodes in the global configuration tree and are replaced by the value of the referenced
node. Macros use the <code>${}</code> syntax:</p>

<pre><code class="language-yaml">name: World
message: Hello ${name}!
</code></pre>

<h3 id="evaluation">Evaluation</h3>

<p>In the example above, the node <code>message</code> will be evaluated to &laquo;Hello World!&raquo;. Note that the macro must specify the full
path of the referenced node.</p>

<p>A macro is evaluated each time the containing node is mapped. This means that if the referenced node has been modified,
the node containing the macro will change accordingly.</p>

<p>A macro is evaluated recursively so it can reference a node containing another macro and so on.</p>

<h3 id="escaping">Escaping</h3>

<p>Macro resolution can be avoided by escaping the dollar sign with a backslash: <code>Hello \${name}!</code> will be evaluated to &laquo;Hello ${name}!&raquo;.</p>

<h3 id="nesting">Nesting</h3>

<p>Macros can be nested:</p>

<pre><code class="language-yaml">names: [ John, Jane ]
index: 1
message: Hello ${names[${index}]}!
</code></pre>

<p>The <code>message</code> node will be evaluated to &laquo;Hello Jane!&raquo;.</p>

<h3 id="default-value">Default value</h3>

<p>If a macro references a non-existing node, it will be evaluated to an empty string. A macro can have a default value
that can be a quoted string or another node reference.</p>

<pre><code class="language-yaml">name: World
message1: Hello ${name}!
message2: Hello ${foobar}!
message3: Hello ${foobar:'Robert'}!
message4: Hello ${foobar:name}!
</code></pre>

<ul>
<li>The <code>message1</code> node will be evaluated to &laquo;Hello World!&raquo;.</li>
<li>The <code>message2</code> node will be evaluated to &laquo;Hello !&raquo;.</li>
<li>The <code>message3</code> node will be evaluated to &laquo;Hello Robert!&raquo;.</li>
<li>The <code>message4</code> node will be evaluated to &laquo;Hello World!&raquo;.</li>
</ul>

<h2 id="function-calls">Function calls</h2>

<p>Function calls allow to call predefined Java methods from configuration nodes. Function calls use the <code>$fn()</code> syntax:</p>

<pre><code class="language-yaml">symbols: [ '!', '.', '?' ]
message: $greet('World', symbols, 0)
</code></pre>

<p>The <code>greet</code> function is implemented as a method annotated with <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;coffig.&amp;#8203;spi.&amp;#8203;ConfigFunction' href='http://seedstack.org/javadoc/org/seedstack/coffig/spi/ConfigFunction.html'>@ConfigFunction</a></code>
in a class implementing <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;coffig.&amp;#8203;spi.&amp;#8203;ConfigFunctionHolder' href='http://seedstack.org/javadoc/org/seedstack/coffig/spi/ConfigFunctionHolder.html'>ConfigFunctionHolder</a></code>:</p>

<pre><code class="language-java">package org.seedstack.samples.config;

public class GreetFunctionHolder implements ConfigFunctionHolder {
    private Coffig coffig;
    
    @Override
    public void initialize(Coffig coffig) {
        this.coffig = coffig;
    }

    @ConfigFunction
    private String greet(String name, String[] symbols, int index) {
        return String.format(&quot;Hello %s %s&quot;, name, symbols[index]);
    }
}
</code></pre>

<p>The <code>GreetFunctionHolder</code> class must be registered with the Java <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html">ServiceLoader</a> mechanism,
with the following file:</p>

<pre><code class="language-plain">src/main/resources
    └ META-INF
        └ services
            └ org.seedstack.coffig.spi.ConfigFunctionHolder
</code></pre>

<p>containing:</p>

<pre><code class="language-plain">org.seedstack.samples.config.GreetFunctionHolder
</code></pre>

<div class="callout callout-warning">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
            
                <i class="fa fa-exclamation-triangle icon-2x"></i>
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>The holder is not injectable because it is possible for configuration functions to be called before the injector is ready.
You must implement your functions in a way that doesn&rsquo;t rely on injection.</p>

        </div>
    </div>
</div>

<h3 id="evaluation-1">Evaluation</h3>

<p>In the example above, the node <code>message</code> will be evaluated to &laquo;Hello World!&raquo;. Parameters are automatically mapped to their
Java type, allowing to pass complex objects to configuration functions. String literals can be passed as parameters by
enclosing them with single quotes. Parameters that reference other nodes must specify their full path.</p>

<h3 id="escaping-1">Escaping</h3>

<p>Function calls can be avoided by escaping the dollar sign with a backslash: <code>\$greet('World', symbols, 0)</code> will be
evaluated to &laquo;$greet(&lsquo;World&rsquo;, symbols, 0)&raquo;.</p>

<h3 id="nesting-1">Nesting</h3>

<p>Parameters can be other functions calls: <code>$greet('World', $getSymbols(), 0)</code> will use the return value of the <code>getSymbols()</code>
function call as second parameter.</p>

<h2 id="override">Override</h2>

<p>Any configuration file can be overridden by adding the &laquo;override&raquo; word in its name before the extension:</p>

<ul>
<li>Any node inside an <code>application.override.yaml</code> file can override any node inside an <code>application.yaml</code> file,</li>
<li>Any node inside a <code>META-INF/configuration/*.override.yaml</code> can override any node inside a <code>META-INF/configuration/*.yaml</code>
file.
<br /></li>
</ul>

<div class="callout callout-tips">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
                <i class="fa fa-lightbulb-o icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>You can use this feature to override configuration in tests. The easiest way to do this is to add an <code>application.override.yaml</code>
at the root of your test classpath.</p>

        </div>
    </div>
</div>

<h2 id="formats">Formats</h2>

<h3 id="yaml">YAML</h3>

<p>Any configuration file can be in the <a href="https://en.wikipedia.org/wiki/YAML">YAML format</a>. The files can use the <code>yaml</code> or
the <code>yml</code> extension indifferently.</p>

<div class="callout callout-info">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
                <i class="fa fa-info-circle icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>This is the preferred configuration format.</p>

        </div>
    </div>
</div>

<h3 id="json">JSON</h3>

<p>Any configuration file can also be in <a href="https://en.wikipedia.org/wiki/JSON">JSON format</a>, by using the <code>json</code> extension
instead. The same rules apply to YAML and JSON files.</p>

<h3 id="properties">Properties</h3>

<p>Any configuration file can also be in <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html">Properties format</a>,
by using the <code>properties</code> extension instead.</p>

<div class="callout callout-info">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
                <i class="fa fa-info-circle icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>Dot-delimited properties are mapped hierarchically. For instance the following properties file:</p>

<pre><code class="language-properties">test.key1=value1
test.key2=value2
</code></pre>

<p>Is equivalent to the following YAML file:</p>

<pre><code class="language-yaml">test:
    key1: value1
    key2: value2
</code></pre>

<p><strong>One important side-effect is that you cannot give a value to a property already used as a prefix of another property.</strong>
In this example, the <code>test</code> property cannot be given any value since it cannot be both parent and leaf at the same time
in the resulting tree.</p>

        </div>
    </div>
</div>

<div class="callout callout-warning">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
            
                <i class="fa fa-exclamation-triangle icon-2x"></i>
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>Properties files only support string values. Other data types, such as numbers, booleans, arrays or lists are not supported and
must be parsed manually.</p>

        </div>
    </div>
</div>

<h2 id="tooling">Tooling</h2>

<div class="callout callout-info">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
                <i class="fa fa-info-circle icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>For more information about the tool mode, see <a href="http://seedstack.org/docs/core/#tool-mode">this page</a>.</p>

        </div>
    </div>
</div>

<h3 id="configuration-options-dump">Configuration options dump</h3>

<p>To dump the all the configuration options available in your project you can execute the <a href="http://seedstack.org/docs/maven-plugin/config/">config goal</a>
of the SeedStack Maven plugin:</p>

<pre><code class="language-bash">mvn -q seedstack:config
</code></pre>

<p>This executes the <code>config</code> tool on your project and dump a tree of all configuration options with their type and
description. The <code>-q</code> disables all non-error Maven logs to clean the output. You can ask for details about a specific leaf
in the configuration tree:</p>

<pre><code class="language-bash">mvn -q -Dargs=&quot;application.basePackages&quot; seedstack:config
</code></pre>

<p>This displays the detailed description of the <code>application.basePackages</code> configuration node.</p>

<h3 id="effective-configuration">Effective configuration</h3>

<p>To dump the configuration effectively scanned, parsed and aggregated by SeedStack you can execute the <a href="http://seedstack.org/docs/maven-plugin/effective-config/">effective-config goal</a>
of the SeedStack Maven plugin:</p>

<pre><code class="language-bash">mvn -q seedstack:effective-config
</code></pre>

<p>This executes the <code>effective-config</code> tool on your project and produce a YAML dump of the aggregated configuration as seen
by the application. The <code>-q</code> disables all non-error Maven logs to clean the output.</p>

<p>You can execute the plugin <a href="http://seedstack.org/docs/maven-plugin/effective-test-config/">effective-test-config goal</a> to display
the test configuration instead of the main one:</p>

<pre><code class="language-bash">mvn -q seedstack:effective-test-config
</code></pre>

<p>This takes into account the test classpath to build the configuration tree.</p>
            </div>
        </div>
    </div>
</div>

    </div>
    <div id="toc">
        <div class="toc" data-spy="affix" data-offset-top="314" data-offset-bottom="336">
    <div>
        
        <div>
            
            <a href='/docs/core/testing/' class="dib f6 pr1 hover-bg-light-gray br-100" data-toggle="tooltip" title='Integration testing'>
                <i class="fa fa-chevron-left"></i>
            </a>
            
            &nbsp;&nbsp;&nbsp;
            
            <a href='/docs/core/logging/' class="dib f6 pl1 hover-bg-light-gray br-100" data-toggle="tooltip" title='Logging'>
                <i class="fa fa-chevron-right"></i>
            </a>
            
        </div>
        
    </div>
    <br/>
    <div>
        <p class="title">On this page</p>
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#sources">Sources</a>
<ul>
<li><a href="#base">Base</a></li>
<li><a href="#auto-discovered">Auto-discovered</a></li>
<li><a href="#command-line">Command-line</a></li>
<li><a href="#environment-variables">Environment variables</a></li>
<li><a href="#system-properties">System properties</a></li>
<li><a href="#priority">Priority</a></li>
</ul></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#declarative-api">Declarative API</a></li>
<li><a href="#programmatic-api">Programmatic API</a></li>
<li><a href="#class-configuration">Class configuration</a></li>
</ul></li>
<li><a href="#mapping">Mapping</a></li>
<li><a href="#validation">Validation</a></li>
<li><a href="#profiles">Profiles</a></li>
<li><a href="#macros">Macros</a>
<ul>
<li><a href="#evaluation">Evaluation</a></li>
<li><a href="#escaping">Escaping</a></li>
<li><a href="#nesting">Nesting</a></li>
<li><a href="#default-value">Default value</a></li>
</ul></li>
<li><a href="#function-calls">Function calls</a>
<ul>
<li><a href="#evaluation-1">Evaluation</a></li>
<li><a href="#escaping-1">Escaping</a></li>
<li><a href="#nesting-1">Nesting</a></li>
</ul></li>
<li><a href="#override">Override</a></li>
<li><a href="#formats">Formats</a>
<ul>
<li><a href="#yaml">YAML</a></li>
<li><a href="#json">JSON</a></li>
<li><a href="#properties">Properties</a></li>
</ul></li>
<li><a href="#tooling">Tooling</a>
<ul>
<li><a href="#configuration-options-dump">Configuration options dump</a></li>
<li><a href="#effective-configuration">Effective configuration</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
    <br/>
    <div>
        
        
        <a href="https://github.com/seedstack/website/edit/master/content/docs/core/configuration.md" target="_blank"><i class="fa fa-edit"></i> Edit</a>
        
    </div>
</div>
    </div>
    <div id="footer">
        <a class="scrollup">Scroll</a>
<div class="footer-v3">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 md-margin-bottom-40">
                    <div class="headline"><h2>About</h2></div>
                    <p class="margin-bottom-25 md-margin-bottom-40">
                        SeedStack is an opinionated, easy-to-use Java development stack for building applications and micro-services.
                    </p>
                    <p>
                        <i class="fa fa-file-text"></i> <a target="_blank" href="http://seedstack.org/docs">Docs</a>
                        <i class="fa fa-info-circle"></i> <a target="_blank" href="http://seedstack.org/javadoc">Javadoc</a>
                        <i class="fa fa-book"></i> <a target="_blank" href="http://seedstack.org/guides">Guides</a>
                        <i class="fa fa-plug"></i> <a target="_blank" href="http://seedstack.org/addons">Add-ons</a>
                        <br/>
                        <i class="fa fa-keyboard-o"></i> <a style="cursor: pointer;" onclick="seedstack.ui.openHelp();">Keyboard shortcuts</a>
                    </p>
                </div>

                <div class="col-md-4 md-margin-bottom-40">
                    <div class="posts">
                        <div class="headline"><h2>License and credits</h2></div>
                        <p>
                            Code licensed under the <a href="https://www.mozilla.org/MPL/2.0" target="_blank">Mozilla Public License 2.0</a>.
                            <br/>
                            Documentation licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.
                            <br/>
                            Some illustrations by <a href="https://www.Vecteezy.com/">www.Vecteezy.com</a>
                        </p>
                    </div>
                </div>

                <div class="col-md-4 map-img">
                    <div class="headline"><h2>Contact us</h2></div>
                    <address>
                        <p>
                            <i class="fa fa-stack-overflow"></i> <a target="_blank" href="http://stackoverflow.com/questions/ask?tags=seedstack">StackOverflow</a>
                            <br/>
                            <i class="fa fa-comments"></i> <a target="_blank" href="https://kiwiirc.com/client/irc.freenode.net#seedstack">IRC</a>
                            <br/>
                            <i class="fa fa-github"></i> <a target="_blank" href="https://github.com/seedstack">GitHub</a>
                            <br/>
                            <i class="fa fa-link"></i> <a target="_blank" href="https://projects.ow2.org/bin/view/seedstack/">OW2</a>
                        </p>
                    </address>

                    <div class="headline"><h2>Stay in touch</h2></div>
                    <div style="margin-bottom: 20px;">
                        <a class="twitter-follow-button"
                           href="https://twitter.com/seedstack"
                           data-show-count="false"
                           data-size="large"
                           data-lang="en">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    </div>
    <div id="hotkeys-modal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Keyboard shortcuts</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <table class="keyboard-mappings">
                            <tbody>
                            <tr>
                                <td class="keys">
                                    <kbd>?</kbd>
                                </td>
                                <td>Show this help dialog</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>/</kbd>
                                </td>
                                <td>Focus the search field</td>
                            </tr>
                            <tr style="height: 20px;"><td></td></tr>
                            <tr>
                                <td class="keys">
                                    <kbd><i class="fa fa-arrow-left"></i></kbd>
                                </td>
                                <td>Go to previous page</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd><i class="fa fa-arrow-right"></i></kbd>
                                </td>
                                <td>Go to next page</td>
                            </tr>
                            <tr style="height: 20px;"><td></td></tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>d</kbd>
                                </td>
                                <td>Go to documentation</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>a</kbd>
                                </td>
                                <td>Go to add-ons library</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>g</kbd>
                                </td>
                                <td>Go to guides list</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="versions-modal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 id="versions-title" class="modal-title">Fetching components...</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <table id="versions-table" class="table table-striped table-hover table-bordered">
                            <tr>
                                <th>Component</th>
                                <th>Version</th>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css">

    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/gradle.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.1.0/highlightjs-line-numbers.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/mousetrap/1.4.6/mousetrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
<script src="/js/jquery.highlight.js"></script>
<script src="/js/seedstack.js"></script>
<script>
    $(document).ready(function () {
        var $search = $('.search-btn');

        $('.search').click(function () {
            if ($search.hasClass('fa-search')) {
                seedstack.ui.openSearch();
            } else {
                seedstack.ui.closeSearch();
            }
        });

        function hideJavaImports(block) {
            $(block).filter('.language-java')
                .find('table > tbody > tr')
                .each(function (i, javaLine) {
                    var $javaLine = $(javaLine);
                    var code = $javaLine.find("td.hljs-ln-code div.hljs-ln-line").text();
                    if (/^package/.test(code) || /^import/.test(code) || code.trim().length === 0) {
                        $javaLine.hide();
                    } else {
                        return false;
                    }
                });
        }

        $('pre code').each(function (i, block) {
            hljs.highlightBlock(block);

            if ($(block).not('.no-linenums').length > 0) {
                hljs.lineNumbersBlock(block);
                
                var lastLine = $(block).find('table > tbody > tr:last');
                if (lastLine.text().trim() === "") {
                    lastLine.remove();
                }
            }

            
            hideJavaImports(block);
        });

        
        $('.doc-content h2, .doc-content h3').each(function () {
            $(this).append(" <a class='title-anchor' href='#" + this.id + "'>#</a>");
        });

        Mousetrap.bind('/', function () {
            seedstack.ui.openSearch();
            return false;
        });

        Mousetrap.bind('left', function () {
            if (seedstack.state.previousPage) {
                window.location = seedstack.state.previousPage;
            }
            return false;
        });

        Mousetrap.bind('right', function () {
            if (seedstack.state.nextPage) {
                window.location = seedstack.state.nextPage;
            }
            return false;
        });

        Mousetrap.bind('?', function () {
            seedstack.ui.openHelp();
            return false;
        });

        Mousetrap.bind('esc', function () {
            seedstack.ui.closeHelp();
            seedstack.ui.closeSearch();
            seedstack.ui.closeVersions();
            return false;
        });

        var originalCallback = Mousetrap.stopCallback;
        Mousetrap.stopCallback = function (e, element, combo) {
            if (combo === 'esc') {
                return false;
            }

            return originalCallback(e, element, combo);
        };

        function bindShortcuts(value) {
            $.each(value, function (sequence, item) {
                if (typeof item === 'string') {
                    Mousetrap.bind("g " + sequence, function () {
                        window.location = item;
                        return false;
                    });
                } else if (typeof item === 'object') {
                    Mousetrap.bind("g " + sequence, function () {
                        window.location = item.path;
                        return false;
                    });
                    if (item.shortcuts && location.pathname.indexOf(item.path) === 0) {
                        bindShortcuts(item.shortcuts);
                    }
                }
            });
        }

        bindShortcuts(seedstack.ui.shortcuts);

        $('.quick-paste span').each(function (index, element) {
            $(element).attr({"id": "quick-paste-line"});
            $(element).append("<span data-toggle=\"tooltip\" data-placement=\"top\" data-title=\"Copy\" data-clipboard-target=\"#quick-paste-line\" class=\"copy-button\"><i class=\"fa fa-clipboard\"></i></span>");
        });
        var preId = 0;
        $('.doc-content pre').each(function (index, element) {
            preId++;
            $(element).attr({"id": "snippet-" + preId});
            $(element).prepend("<span data-toggle=\"tooltip\" data-placement=\"left\" data-title=\"Copy\" data-clipboard-target=\"#snippet-" + preId + "\" class=\"copy-button\"><i class=\"fa fa-clipboard\"></i></span>");
        });
        var clipboard = new Clipboard('.copy-button', {
            target: function (trigger) {
                var elt = $($(trigger).data('clipboard-target'));
                elt.find('code > table > tbody > tr').show();
                return elt.get(0);
            }
        });
        clipboard.on('success', function (e) {
            var elt = $($(e.trigger).data('clipboard-target'));
            hideJavaImports($(elt).children("code"));

            var tooltip = $("body #" + $(e.trigger).attr("aria-describedby"));
            tooltip.css('left', '-=14px');
            tooltip.children(".tooltip-inner").html("Copied!");
            e.clearSelection();
        });
        clipboard.on('error', function (e) {
            var tooltip = $("body #" + $(e.trigger).attr("aria-describedby"));
            tooltip.css('left', '-=83px');
            tooltip.children(".tooltip-inner").html("Error! Copy manually");
        });

        $('[data-toggle="tooltip"]').tooltip({
            container: 'body'
        });

        $('#hotkeys-modal, #versions-modal').bind('hidden.bs.modal', function () {
            $("html").css("margin-right", "0px");
        }).bind('show.bs.modal', function () {
            $("html").css("margin-right", "-15px");
        });

        var query = seedstack.strings.parseQueryString(location);
        if (query.h && query.h.length > 0) {
            $('.doc-content').highlight(query.h);
            if (query.scroll) {
                var firstOccurence = $('span[class=highlight]:first');
                if (firstOccurence.length > 0) {
                    $('html, body').animate({
                        scrollTop: firstOccurence.offset().top - 20
                    }, 250);
                }
            }
        }

        $(window).scroll(function () {
            if ($(this).scrollTop() > 200) {
                $('.scrollup').fadeIn();
            } else {
                $('.scrollup').fadeOut();
            }
        });

        $('.scrollup').click(function () {
            $("html, body").animate({scrollTop: 0}, 250);
            return false;
        });
    });
</script>
<script>window.twttr = (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);
    t._e = [];
    t.ready = function (f) {
        t._e.push(f);
    };
    return t;
}(document, "script", "twitter-wjs"));</script>

</body>
</html>