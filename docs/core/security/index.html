<!DOCTYPE html>



<html lang="en">
<head>

    


    


<title>
    Security
</title>
<meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">



<link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,700,300,400" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="http://seedstack.org/assets/unify/css/style.css">
<link rel="stylesheet" href="http://seedstack.org/assets/unify/plugins/font-awesome/css/font-awesome.css">
<link rel="stylesheet" href="http://seedstack.org/css/style.css">



<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "url": "http://seedstack.org",
  "logo": "http://seedstack.org/img/logos/seedstack.png"
}
</script>



<meta property="og:title" content='Security' />
<meta property="og:description" content="The seed-security-core module provides application-level security. It takes charge of the following tasks:" />
<meta property="og:url" content="http://seedstack.org/docs/core/security/" />
<meta property="og:site_name" content="SeedStack" />
<meta property="og:image" content="http://seedstack.org/img/opengraph.png" />



<link rel="search" type="application/opensearchdescription+xml" href="http://seedstack.org/opensearch.xml" title="SeedStack" />



<link rel="apple-touch-icon" sizes="57x57" href="http://seedstack.org/img/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="http://seedstack.org/img/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://seedstack.org/img/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="http://seedstack.org/img/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://seedstack.org/img/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="http://seedstack.org/img/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="http://seedstack.org/img/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="http://seedstack.org/img/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://seedstack.org/img/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="http://seedstack.org/img/favicons/manifest.json">
<meta name="apple-mobile-web-app-title" content="SeedStack">
<meta name="application-name" content="SeedStack">
<meta name="msapplication-TileColor" content="#00a300">
<meta name="msapplication-TileImage" content="/img/favicons/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">



<script type="text/javascript">
    window.seedstack = {
        baseUrl: "http:\/\/seedstack.org\/",
        state: {}
    };
</script>


</head>
<body class="homepage">
    
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5R5FP9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5R5FP9');</script>


    <div id="header">
        
    

<div class="header">
    <div class="container">
        <a class="logo" href="http://seedstack.org/">SeedStack</a>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="fa fa-bars"></span>
        </button>
    </div>
    <div class="collapse navbar-collapse navbar-responsive-collapse" data-role="navigation" style="pointer-events: none;">
        <div class="container">
            <ul class="nav navbar-nav" style="pointer-events: auto;">
                <li class='active'>
                    <a href="http://seedstack.org/docs">Documentation</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/guides">Guides</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/addons">Add-ons</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/posts">News</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/community">Community</a>
                </li>
                <li class='dropdown '>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">
                        More
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="http://seedstack.org/glossary">Glossary</a></li>
                        <li><a href="http://seedstack.org/tags">Tags</a></li>
                        <li><a href="http://seedstack.org/project">Project info</a></li>
                        <li><a target="_blank" href="http://seedstack.org/javadoc"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> Javadoc</a></li>
                        <li><a target="_blank" href="https://github.com/seedstack/distribution/releases"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> Releases</a></li>
                        <li><a target="_blank" href="https://github.com/seedstack"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> GitHub</a></li>
                    </ul>
                </li>
                <li>
                    <i class="search fa fa-search search-btn"></i>
                    <div class="search-open">
                        <form method="GET" action="http://seedstack.org/search">
                            <div class="input-group animated fadeInDown">
                                <input id="search-field" type="text" class="form-control" placeholder="Search" name="q">
                                <span class="input-group-btn">
                                    <button class="btn-u" type="submit">Go</button>
                                </span>
                            </div>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>


        
    

<div class="title-header small">
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12">
                <h1>Documentation</h1>
                <p class="hidden-xs">
                    Learn everything about SeedStack.
            </div>
            <div class="col-md-3 hidden-sm hidden-xs">
                <div class="header-image-wrapper">
                    <img class="header-image" src="/img/logos/glossary-logo.svg">
                </div>
            </div>
        </div>
    </div>
</div>
<div class="title-subheader">
    <div class="container">
        <ul>
            <li>
                <span class='active'>
                    <i class="fa fa-dot-circle-o"></i> <a href="http://seedstack.org/docs">Core</a>
                </span>
            </li>
            <li>
                <span class=''>
                    <i class="fa fa-briefcase"></i> <a href="http://seedstack.org/docs/business">Business</a>
                </span>
            </li>
            <li>
                <span class=''>
                    <i class="fa fa-cog"></i> <a href="http://seedstack.org/docs/maven-plugin">Maven plugin</a>
                </span>
            </li>
            <li>
                <span class=''>
                    <i class="fa fa-gift"></i> <a href="http://seedstack.org/docs/samples">Samples</a>
                </span>
            </li>
            <li>
                <span>
                    <i class="fa fa-medkit"></i> <a target="_blank" href="http://seedstack.org/docs/troubleshooting">Troubleshooting</a>
                </span>
            </li>
            <li>
                <span>
                    <i class="fa fa-coffee"></i> <a target="_blank" href="http://seedstack.org/javadoc">Javadoc</a>
                </span>
            </li>
            
            <li class="pull-right">
                <span class="menu-toggle" style="" data-toggle="collapse" data-target=".side-menu-collapse">
    <span class="sr-only">Toggle menu</span>
    <i class="fa fa-bars"></i>
</span>

            </li>
            
        </ul>
    </div>
</div>

    </div>
    <div id="content" class="container">
        <div class="row">
    
    <div class="col-md-3">
        












<nav class="side-menu collapse side-menu-collapse" data-role="navigation">
    <div class="list-group">
        <ul class="nav">
            
            
            <li class="list-group-header">
                <a href="/docs/basics/" class="" data-target=".the-basics">The Basics</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/basics/" class="">
                            Getting Started
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/learn-the-basics/" class="">
                            Learn the Basics
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/learn-the-basics\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/dependency-injection/" class="">
                            Dependency Injection
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/dependency-injection\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/business/" class="">
                            Business Code
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/business\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/persistence/" class="">
                            Persistence
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/persistence\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/rest/" class="">
                            REST API
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/rest\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/basics/testing/" class="">
                            Testing
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/basics\/testing\/';
                        </script>
                    
                    
                </ul>
            </li>
            
            </li>
            
            <li class="list-group-header">
                <a href="/docs/core/" class=" active" data-target=".core">Core</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/core/" class="">
                            Running Applications
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/core\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/testing/" class="">
                            Integration Testing
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/core\/testing\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/configuration/" class="">
                            Configuration
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/core\/configuration\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/logging/" class="">
                            Logging
                        </a>
                        
                    </li>
                    
                    
                    
                        
                        <script>
                            seedstack.state.previousPage = '\/docs\/core\/logging\/';
                        </script>
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/security/" class="active">
                            Security
                        </a>
                        
                    </li>
                    
                    
                        
                        
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/crypto/" class="">
                            Cryptography
                        </a>
                        
                    </li>
                    
                        
                        
                        <script>
                            seedstack.state.nextPage = '\/docs\/core\/crypto\/';
                        </script>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/transactions/" class="">
                            Transactions
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/validation/" class="">
                            Validation
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/jndi/" class="">
                            JNDI
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/core/proxy/" class="">
                            Proxy
                        </a>
                        
                    </li>
                    
                    
                    
                    
                </ul>
            </li>
            
            </li>
            
            <li class="list-group-header">
                <a href="/docs/cli/" class="" data-target=".command-line">Command-Line</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/cli/" class="">
                            Running CLI Applications
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/cli/commands/" class="">
                            Defining Commands
                        </a>
                        
                    </li>
                    
                    
                    
                    
                </ul>
            </li>
            
            </li>
            
            <li class="list-group-header">
                <a href="/docs/web/" class="" data-target=".web">Web</a>
            </li>
            
            <li class="list-group-item">
                <ul>
                    
                    
                    <li>
                        
                        <a href="/docs/web/" class="">
                            Running Web Applications
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/testing/" class="">
                            Web Integration Testing
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/rest/" class="">
                            REST
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/cors/" class="">
                            CORS
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/security/" class="">
                            Web Security
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/servlets/" class="">
                            Servlet, Filters and Listeners
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/static-resources/" class="">
                            Static Resources
                        </a>
                        
                    </li>
                    
                    
                    
                    
                    
                    <li>
                        
                        <a href="/docs/web/websockets/" class="">
                            WebSockets
                        </a>
                        
                    </li>
                    
                    
                    
                    
                </ul>
            </li>
            
            </li>
            
        </ul>
    </div>
</nav>



    </div>
    <div class="col-md-9">
    
        <div class="content-wrapper">
            <div class="doc-content">
                <h1 class="nocount">Security</h1>
                <p>The <code>seed-security-core</code> module provides application-level security. It takes charge of the following tasks:</p>

<ul>
<li>Identification (provides the identity of a subject),</li>
<li>Authentication (verifies the subject identity),</li>
<li>Authorization (defines which roles and permissions a subject can have),</li>
<li>Access-control (enforces access restrictions to entry-points and/or to any arbitrary code).</li>
</ul>

<div class="callout callout-info">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
                <i class="fa fa-info-circle icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>The security engine used by SeedStack is <a href="http://shiro.apache.org/">Apache Shiro</a>.</p>

        </div>
    </div>
</div>

<p>Security support requires the following dependency in your project:</p>








    
        
            
        
    

<div class="tab-v2">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab-org-seedstack-seed-seed-security-core-maven" data-toggle="tab" aria-expanded="true"><img class="pull-left" style="margin: 0 5px 0 0; height: 20px;" src="http://seedstack.org//img/logos/maven.png">Maven</a></li>
        <li class=""><a href="#tab-org-seedstack-seed-seed-security-core-gradle" data-toggle="tab" aria-expanded="true"><img class="pull-left" style="margin: 0 5px 0 0; height: 20px;" src="http://seedstack.org//img/logos/gradle.png">Gradle</a></li>
    </ul>
    <div class="clear-both"></div>
    <div class="tab-content" style="padding-top: 0;">
        <div class="tab-pane in active" id="tab-org-seedstack-seed-seed-security-core-maven">
            <pre style="margin-top: 0; border: solid 1px #eee; border-top: none;"><code class="language-xml no-linenums" style="background-color: #fff;">&lt;dependency&gt;
    &lt;groupId&gt;org.seedstack.seed&lt;/groupId&gt;
    &lt;artifactId&gt;seed-security-core&lt;/artifactId&gt;<span id="org-seedstack-seed-seed-security-core-version" style="display: none;">
    &lt;version&gt;3.15.1&lt;/version&gt;</span>
&lt;/dependency&gt;</code></pre>
            <small class="pull-right" style="color: #aaa; margin-top: -20px; margin-right: 5px;">
                <span id="org-seedstack-seed-seed-security-core-warn" style="display: none;"><i class="fa fa-warning" style="color: orange;"></i> Specifying versions manually is error-prone, use <a href="http://seedstack.org/docs/basics#dependency-management">dependency management</a> instead.</span>
                <a style="cursor: pointer; display: block;" id="org-seedstack-seed-seed-security-core-show" onclick="$('#org-seedstack-seed-seed-security-core-version, #org-seedstack-seed-seed-security-core-warn').show(); $('#org-seedstack-seed-seed-security-core-show').hide();">Show version</a>
            </small>
        </div>
        <div class="tab-pane in" id="tab-org-seedstack-seed-seed-security-core-gradle">
            <pre style="margin-top: 0; border: solid 1px #eee; border-top: none;"><code class="language-gradle no-linenums" style="background-color: #fff;">dependencies {
    compile(&quot;org.seedstack.seed:seed-security-core:3.15.1&quot;)
}</code></pre>
        </div>
    </div>
</div>


<h2 id="concepts">Concepts</h2>

<h3 id="subjects">Subjects</h3>

<p>Subjects represent the entity which executes actions on the application. The most common type of subject is the &laquo;User&raquo;
type, which represents a human operator interacting with the application. Subjects are allowed to perform certain actions
in your application through their association with roles or direct permissions. Assigning roles and permissions to subjects
is done through one or more <code>Realm</code>.</p>

<h3 id="roles">Roles</h3>

<p>A Role is a named entity that typically represents a set of behaviors or responsibilities. Those behaviors translate to
things you can or can&rsquo;t do with an application. Roles are typically assigned to subject like user accounts, so by
association, subjects can <em>do</em> the things attributed to various roles.</p>

<h3 id="permissions">Permissions</h3>

<p>Permissions are the most atomic elements of a security policy. They describe concrete actions and represent what can
be done in an application. A well-formed permission statement describes one or more resource(s) and what actions are
possible when a subject interacts with those resources. Consider the following examples of permissions:</p>

<ul>
<li>Open a file,</li>
<li>Print a document,</li>
<li>Access the <code>/products</code> Web resource,</li>
<li>Delete an order.</li>
</ul>

<p>CRUD actions can frequently be found in permissions but any meaningful verb can be used. The fundamental idea is that
a permission should combine a resource description with an action description.</p>

<div class="callout callout-info">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
                <i class="fa fa-info-circle icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>Permission statements reflect behavior (actions associated with resource types) only. They do <strong>not</strong> reflect who is able to
perform such behavior. Defining who (which subject) can do what (which permission) is done by assigning permission to
subjects.</p>

        </div>
    </div>
</div>

<h4 id="simple-usage">Simple usage</h4>

<p>The simplest expression of a permission is a single term String:</p>

<pre><code>printDocument
deleteDocument
viewDocument
</code></pre>

<p>These permissions represent the ability to <code>print</code>, <code>delete</code> or <code>view</code> a document. This very basic form of permission requires
to be granted one-by-one or with a <code>*</code> wildcard, which will grant all the permissions of the application. This may work
in the simplest applications but it is not recommended. The <em>multi-level</em> permissions should be preferred.</p>

<h4 id="multi-level">Multi-level</h4>

<p>Instead of expressing the permission as a single term, a multi-level permission can be used:</p>

<pre><code>document:print
document:delete
document:view
</code></pre>

<p>The colon (<code>:</code>) is a special character that is used to delimit the different parts of a multi-level permission. There
are no enforced requirements on how a multi-level permission should be organized, but it is recommended to go from the most
general to the most specific, from left to right. Also, there is no limit to the number of parts.</p>

<h4 id="multiple-values">Multiple values</h4>

<p>Each part can contain multiple values, separated by commas (<code>,</code>):</p>

<pre><code>document:print,view
</code></pre>

<p>When assigning this permission to a subject, this grants the ability to <code>print</code> and <code>view</code> documents.</p>

<h4 id="all-values">All values</h4>

<p>To grant all permissions of a specific level, use the <code>*</code> wildcard character:</p>

<pre><code>document:*
*:view
</code></pre>

<p>The first permission, when assigned to a subject, allow to do any action on documents (meaning that any permission check
of the <code>document:XXX</code> pattern will be granted). The second permission grants the view action on all application resources
(meaning that any permission check of the <code>XXX:view</code> pattern will be granted).</p>

<h4 id="instance-level-checks">Instance-level checks</h4>

<p>The identifier of a specific instance can be used at the end of a permission:</p>

<pre><code>document:print:doc273
</code></pre>

<p>This permission allows to print the document identified by the <code>doc273</code> identifier.</p>

<h4 id="missing-parts">Missing parts</h4>

<p>Missing parts in permissions imply that the user has access to all values corresponding to that part:</p>

<pre><code>printer:print
</code></pre>

<p>This permission is equivalent to:</p>

<pre><code>printer:print:*
</code></pre>

<p>Note that you can only leave off parts from the <em>end</em> of the permission.</p>

<h2 id="realms">Realms</h2>

<p>A security realm is responsible for authenticating and authorizing subjects. Realms can retrieve information from various
data sources.</p>

<p>Configuring realms is done as below:</p>


<div class="tab-v2">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab-security-realms-config" data-toggle="tab" aria-expanded="true">Configuration</a></li>
        <li class=""><a href="#tab-security-realms-dump" data-toggle="tab" aria-expanded="true">Tool</a></li>
    </ul>
    <span class="tabs-icon fa-2x fa fa-wrench pull-right"></span>
    <div class="clear-both"></div>
    <div class="tab-content" style="padding-top: 0;">
        <div class="tab-pane in active" id="tab-security-realms-config"><pre><code class="language-yaml">security:
  # Ordered list of security realms used to authenticate and authorize subjects
  realms:
    - 
      # Name of the security realm
      name: (String)
      
      # Name of the role mapper used for this realm (optional)
      roleMapper: (String)
      
      # Name of the permission resolver used for this realm (optional)
      permissionResolver: (String)
</code></pre>
</div>
        <div class="tab-pane in" id="tab-security-realms-dump">
            <p style="margin-top: 20px;">To dump the <code>security.realms</code> configuration options:</p>
            <pre><code class="language-bash">mvn -q -Dargs="security.realms" seedstack:config</code></pre>
        </div>
    </div>
</div>


<h3 id="built-in-realms">Built-in realms</h3>

<p>SeedStack provides the following realms:</p>

<ul>
<li><code>ConfigurationRealm</code> which uses the application configuration.</li>
<li><code>X509CertificateRealm</code> which uses X509 certificates.</li>
<li><code>LdapRealm</code> which uses an LDAP directory.</li>
</ul>

<div class="callout callout-warning">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
            
                <i class="fa fa-exclamation-triangle icon-2x"></i>
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p><code>ConfigurationRealm</code> is the default realm, which is fine for development and testing purposes. You may need to use
more robust and flexible realms in production, like the <code>LdapRealm</code>.</p>

        </div>
    </div>
</div>

<h4 id="configuration-based-realm">Configuration-based realm</h4>

<p>This realm relies on the application configuration to authenticate subject and retrieve their roles. It is mainly intended
to be used for testing purposes. To declare subjects (called users in this realm), use the following configuration:</p>


<div class="tab-v2">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab-security-users-config" data-toggle="tab" aria-expanded="true">Configuration</a></li>
        <li class=""><a href="#tab-security-users-dump" data-toggle="tab" aria-expanded="true">Tool</a></li>
    </ul>
    <span class="tabs-icon fa-2x fa fa-wrench pull-right"></span>
    <div class="clear-both"></div>
    <div class="tab-content" style="padding-top: 0;">
        <div class="tab-pane in active" id="tab-security-users-config"><pre><code class="language-yaml">security:
  # Map of users and their properties
  users:
    user1:
      # Password of the user
      password: somePassword
      
      # List of roles granted to the user.
      roles: [ role1, role2 ]
</code></pre>
</div>
        <div class="tab-pane in" id="tab-security-users-dump">
            <p style="margin-top: 20px;">To dump the <code>security.users</code> configuration options:</p>
            <pre><code class="language-bash">mvn -q -Dargs="security.users" seedstack:config</code></pre>
        </div>
    </div>
</div>


<p>This configuration defines one subject named <code>user1</code> with its respective password and roles.</p>

<h4 id="x509-certificate-realm">X509 certificate realm</h4>

<p>This realm, which is intended to be used in Web applications, uses the certificates authorized by the Web server when an SSL
connection is in use. It stores the certificates in the user principals as well as the UID declared in the certificate.
It also uses the CN of the issuer of the certificates to define the basic roles of the user.</p>

<h4 id="oauth-realm">OAuth realm</h4>

<p>This realm is available in the <a href="http://seedstack.org/addons/oauth/">OAuth add-on</a>.</p>

<h4 id="ldap-realm">LDAP realm</h4>

<p>This realm is available in the <a href="http://seedstack.org/addons/ldap/">LDAP add-on</a>.</p>

<h4 id="custom-realm">Custom realm</h4>

<p>You can create a custom realm by:</p>

<ul>
<li>Creating a class that implements <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;Realm' href='http://seedstack.org/javadoc/org/seedstack/seed/security/Realm.html'>Realm</a></code>.</li>
<li>Use the realm class simple name in the name configuration attribute of the realm.</li>
</ul>

<h2 id="role-mapper">Role mapper</h2>

<p>Each realm has its own role mapper. It has the ability to map a role name retrieved by the realm to a more friendly
application-specific role name.</p>

<h3 id="configuration-based-role-mapper">Configuration-based role mapper</h3>

<p>This is the default role mapper. It uses the application configuration to map role names:</p>


<div class="tab-v2">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab-security-roles-config" data-toggle="tab" aria-expanded="true">Configuration</a></li>
        <li class=""><a href="#tab-security-roles-dump" data-toggle="tab" aria-expanded="true">Tool</a></li>
    </ul>
    <span class="tabs-icon fa-2x fa fa-wrench pull-right"></span>
    <div class="clear-both"></div>
    <div class="tab-content" style="padding-top: 0;">
        <div class="tab-pane in active" id="tab-security-roles-config"><pre><code class="language-yaml">security:
  # Mapping of role names
  roles:
    role1: [ 'ORG.APP.ROLE1', 'ORG.GLOBAL.ADMIN' ]
    role2: [ 'ORG.APP.ROLE2' ]
    role3: 'ORG.APP.{location}.ROLE3'
    role4: '*'
</code></pre>
</div>
        <div class="tab-pane in" id="tab-security-roles-dump">
            <p style="margin-top: 20px;">To dump the <code>security.roles</code> configuration options:</p>
            <pre><code class="language-bash">mvn -q -Dargs="security.roles" seedstack:config</code></pre>
        </div>
    </div>
</div>


<p>The configuration above configuration defines the following mappings:</p>

<ul>
<li>Application-role <code>role1</code> is attributed to the subject when the realm provides <code>ORG.APP.ROLE1</code> <strong>OR</strong> <code>ORG.GLOBAL.ADMIN</code>.</li>
<li>Application-role <code>role2</code> is attributed to the subject when the realm provides <code>ORG.APP.ROLE2</code>.</li>
<li>Application-role <code>role3</code> is attributed to the subject when the realm provides <code>ORG.APP.FR.ROLE3</code>, where <code>FR</code> is converted
into a security scope. As such a scoped <code>role3</code> is attributed to the subject, which is only valid in <code>FR</code> location.</li>
<li>Application-role <code>role4</code> is attributed to every subject authenticated.</li>
</ul>

<div class="callout callout-info">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
                <i class="fa fa-info-circle icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>If no mapping is configured, the realm roles will be available unchanged as application-specific roles (no mapping takes place at all).</p>

        </div>
    </div>
</div>

<div class="callout callout-warning">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
            
                <i class="fa fa-exclamation-triangle icon-2x"></i>
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>An application role is granted when <strong>at least one</strong> of the realm roles in the list is granted (logical OR).</p>

        </div>
    </div>
</div>

<h3 id="custom-role-mapper">Custom role mapper</h3>

<p>You can create a custom role mapper by:</p>

<ul>
<li>Creating a class that implements <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;RoleMapping' href='http://seedstack.org/javadoc/org/seedstack/seed/security/RoleMapping.html'>RoleMapping</a></code>.</li>
<li>Using your class simple name in the roleMapper configuration attribute of the realm.</li>
</ul>

<h2 id="permission-resolver">Permission resolver</h2>

<p>Each realm has its own permission resolver. It resolves the permissions granted for a given role.</p>

<h3 id="configuration-based-permission-resolver">Configuration-based permission resolver</h3>

<p>This is the default permission resolver. It uses the application configuration to resolve permissions for roles:</p>


<div class="tab-v2">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab-security-permissions-config" data-toggle="tab" aria-expanded="true">Configuration</a></li>
        <li class=""><a href="#tab-security-permissions-dump" data-toggle="tab" aria-expanded="true">Tool</a></li>
    </ul>
    <span class="tabs-icon fa-2x fa fa-wrench pull-right"></span>
    <div class="clear-both"></div>
    <div class="tab-content" style="padding-top: 0;">
        <div class="tab-pane in active" id="tab-security-permissions-config"><pre><code class="language-yaml">security:
  # Map of permissions for a particular role
  permissions:
    role1Name: 
      - permission1
      - permission2
      - permission3
    role2Name: 
      - permission1
      - permission4
</code></pre>
</div>
        <div class="tab-pane in" id="tab-security-permissions-dump">
            <p style="margin-top: 20px;">To dump the <code>security.permissions</code> configuration options:</p>
            <pre><code class="language-bash">mvn -q -Dargs="security.permissions" seedstack:config</code></pre>
        </div>
    </div>
</div>


<h3 id="custom-permission-resolver">Custom permission resolver</h3>

<p>You can create a custom permission resolver by:</p>

<ul>
<li>Creating a class that implements <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;RolePermissionResolver' href='http://seedstack.org/javadoc/org/seedstack/seed/security/RolePermissionResolver.html'>RolePermissionResolver</a></code>.</li>
<li>Using your class simple name in the permissionResolver configuration attribute of the realm.</li>
</ul>

<h2 id="example">Example</h2>

<p>The following example is based on the defaults:</p>

<ul>
<li>A <code>ConfigurationRealm</code>,</li>
<li>A <code>ConfigurationRolePermissionResolver</code>,</li>
<li>A <code>ConfigurationRoleMapping</code>.</li>
</ul>

<pre><code class="language-yaml">security:
  users:
    admin:
      password: password1
      roles: 'APP.ADMIN'
    user1:
      password: password2
      roles: [ 'APP.FR.MANAGER', 'APP.UK.MANAGER' ]
    user2:
      password: password3
      roles: 'APP.BASIC'
  roles:
    admin: 'APP.ADMIN'
    manager: [ 'APP.ADMIN', 'APP.{location}.MANAGER' ]
    normal: [ 'APP.ADMIN', 'APP.BASIC' ]
    guest: '*'
  permissions:
    admin: [ 'users:clear', 'cache:invalidate' ]
    manager: [ 'users:delete', 'users:create' ]
    normal: 'users:list'
</code></pre>

<p>Note that:</p>

<ul>
<li>Application-roles (<code>admin</code>, <code>manager</code>, <code>normal</code> and <code>guest</code>) are attributed to a subject if it has <strong>at least one</strong>
of the corresponding realm roles (<code>APP.ADMIN</code>, <code>APP.FR.MANAGER</code> , <code>APP.UK.MANAGER</code>, <code>APP.BASIC</code>).
For instance, having the <code>APP.ADMIN</code> realm role is enough to have the <code>manager</code> application-role.</li>
<li>Subject <code>user1</code> will only have the <code>users:delete</code> and <code>users:create</code> permissions on <code>FR</code> and <code>UK</code> locations.</li>
<li>Subject <code>admin</code> will have the <code>users:delete</code> and <code>users:create</code> permissions everywhere (no location restriction).</li>
<li>The <code>guest</code> application-role will be attributed to every identified subject.</li>
</ul>

<h2 id="usage">Usage</h2>

<p>Access-control can be done by two means: annotation-based checks and programmatic checks.</p>

<div class="callout callout-tips">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
                <i class="fa fa-lightbulb-o icon-2x" style="line-height: 30px;"></i>
            
            
            
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>It is <strong>strongly recommended</strong> to check for permissions, instead of checking for roles. Since a permission represent
an action, it is a natural fit for protecting the portion of code implementing this very action. On the contrary a
role check is generally too broad.</p>

        </div>
    </div>
</div>

<h3 id="annotation-based-checks">Annotation-based checks</h3>

<p>There are two annotations that checks for authorizations before allowing method execution:</p>

<ul>
<li><code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;RequiresRoles' href='http://seedstack.org/javadoc/org/seedstack/seed/security/RequiresRoles.html'>@RequiresRoles</a></code> which checks that the current subject has one or more
role(s) before allowing to execute the method.</li>
<li><code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;RequiresPermissions' href='http://seedstack.org/javadoc/org/seedstack/seed/security/RequiresPermissions.html'>@RequiresPermissions</a></code> which checks that the current subject has one or
more permission(s) before allowing to execute the method.</li>
</ul>

<p>When the security check fails, an exception of type <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;AuthorizationException' href='http://seedstack.org/javadoc/org/seedstack/seed/security/AuthorizationException.html'>AuthorizationException</a></code>
is thrown:</p>

<pre><code class="language-java">public class SomeClass {
    @RequiresRoles(&quot;administrator&quot;)
    public void deleteUser(User user) {
        // This method is executed only if current subject has role 'administrator'
        // When not, an AuthorizationException is thrown
    }
    
    @RequiresPermissions(&quot;account:create&quot;)
    public void createAccount(Account account) {
        // This method is executed only if current subject has permission 'account:create'
        // When not, an AuthorizationException is thrown
    }
}
</code></pre>

<div class="callout callout-danger">
    <div style="display:table; width: 100%">
        <div style="display:table-cell; width: 50px; vertical-align: middle;">
            
            
            
            
                <i class="fa fa-exclamation-triangle icon-2x"></i>
            
            
            
        </div>
        <div style="display:table-cell; vertical-align: middle;">
            <p>Note that these annotation-based security checks are implemented with <strong>method interception</strong> and are subject to
<strong><a href="http://seedstack.org/docs/basics/dependency-injection/#method-interception">its limitations</a></strong>.</p>

        </div>
    </div>
</div>

<h3 id="programmatic-checks">Programmatic checks</h3>

<p>If annotation-based security checks cannot be used, or if a programmatic style is preferred, the
<code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;SecuritySupport' href='http://seedstack.org/javadoc/org/seedstack/seed/security/SecuritySupport.html'>SecuritySupport</a></code> facade can be injected:</p>

<pre><code class="language-java">public class SomeClass {
	@Inject
	private SecuritySupport securitySupport;
	
	public void doChecks() {
        // To check if the current subject, if any, is authenticated:
        if (securitySupport.isAuthenticated()) {
            doSomething();
        }
        
        // To check if the current subject, if any, has a specific role:
        if (securitySupport.hasRole(&quot;admin&quot;)) {
            clearUsers();
        }
    
        // To check if the current subject, if any, has a specific permission:
        if (securitySupport.isPermitted(&quot;cache:invalidate&quot;)) {
            flushCache();
        }	    
	}
}
</code></pre>

<h3 id="access-to-subject-principals">Access to subject principals</h3>

<p>The <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;SecuritySupport' href='http://seedstack.org/javadoc/org/seedstack/seed/security/SecuritySupport.html'>SecuritySupport</a></code> facade provides access to current subject principals:</p>

<pre><code class="language-java">public class SomeClass {
	@Inject
	private SecuritySupport securitySupport;
	
	public void retrievePrincipals() {
        // Get current subject id
        securitySupport.getSimplePrincipalByName(Principals.IDENTITY).getValue();
        
        // Get current subject first name, if any
        securitySupport.getSimplePrincipalByName(Principals.FIRST_NAME).getValue(); 
	}
}
</code></pre>

<h2 id="testing">Testing</h2>

<p>Testing the security model and its effective enforcement is a good practice.</p>

<h3 id="defining-test-users">Defining test users</h3>

<p>In your test configuration, you can use the <code>ConfigurationRealm</code> realm to define test users like described <a href="#configuration-based-realm">here</a>.</p>

<h3 id="subject-authentication">Subject authentication</h3>

<p>To authenticate a subject before a test method is executed, use the <code><a data-toggle="tooltip" data-html="true" title='org.&amp;#8203;seedstack.&amp;#8203;seed.&amp;#8203;security.&amp;#8203;WithUser' href='http://seedstack.org/javadoc/org/seedstack/seed/security/WithUser.html'>@WithUser</a></code> annotation:</p>

<pre><code class="language-java">	@RunWith(SeedITRunner.class)
	public class SomeSecurityIT {
	    @Inject
	    private SecuritySupport securitySupport;
	    
	    @Inject
	    private MySecuredService mySecuredService;
	 

	    @Test(expected = AuthorizationException.class)
	    @WithUser(id = &quot;basic&quot;, password = &quot;password&quot;)
	    public void unprivilegedUserCannotAccessSecuredService() {
	        mySecuredService.securedMethod();
	        fail(&quot;securedMethod() shouldn't have been called&quot;);
	    }
	    
	    @Test
	    @WithUser(id = &quot;admin&quot;, password = &quot;password&quot;)
	    public void adminUserIsAllowedToAccessSecuredService() {
	        mySecuredService.securedMethod();
	    }
	}
</code></pre>
            </div>
        </div>
    </div>
</div>

    </div>
    <div id="toc">
        <div class="toc" data-spy="affix" data-offset-top="314" data-offset-bottom="336">
    <div>
        
        <div>
            
            <a href='/docs/core/logging/' class="dib f6 pr1 hover-bg-light-gray br-100" data-toggle="tooltip" title='Logging'>
                <i class="fa fa-chevron-left"></i>
            </a>
            
            &nbsp;&nbsp;&nbsp;
            
            <a href='/docs/core/crypto/' class="dib f6 pl1 hover-bg-light-gray br-100" data-toggle="tooltip" title='Cryptography'>
                <i class="fa fa-chevron-right"></i>
            </a>
            
        </div>
        
    </div>
    <br/>
    <div>
        <p class="title">On this page</p>
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#concepts">Concepts</a>
<ul>
<li><a href="#subjects">Subjects</a></li>
<li><a href="#roles">Roles</a></li>
<li><a href="#permissions">Permissions</a>
<ul>
<li><a href="#simple-usage">Simple usage</a></li>
<li><a href="#multi-level">Multi-level</a></li>
<li><a href="#multiple-values">Multiple values</a></li>
<li><a href="#all-values">All values</a></li>
<li><a href="#instance-level-checks">Instance-level checks</a></li>
<li><a href="#missing-parts">Missing parts</a></li>
</ul></li>
</ul></li>
<li><a href="#realms">Realms</a>
<ul>
<li><a href="#built-in-realms">Built-in realms</a>
<ul>
<li><a href="#configuration-based-realm">Configuration-based realm</a></li>
<li><a href="#x509-certificate-realm">X509 certificate realm</a></li>
<li><a href="#oauth-realm">OAuth realm</a></li>
<li><a href="#ldap-realm">LDAP realm</a></li>
<li><a href="#custom-realm">Custom realm</a></li>
</ul></li>
</ul></li>
<li><a href="#role-mapper">Role mapper</a>
<ul>
<li><a href="#configuration-based-role-mapper">Configuration-based role mapper</a></li>
<li><a href="#custom-role-mapper">Custom role mapper</a></li>
</ul></li>
<li><a href="#permission-resolver">Permission resolver</a>
<ul>
<li><a href="#configuration-based-permission-resolver">Configuration-based permission resolver</a></li>
<li><a href="#custom-permission-resolver">Custom permission resolver</a></li>
</ul></li>
<li><a href="#example">Example</a></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#annotation-based-checks">Annotation-based checks</a></li>
<li><a href="#programmatic-checks">Programmatic checks</a></li>
<li><a href="#access-to-subject-principals">Access to subject principals</a></li>
</ul></li>
<li><a href="#testing">Testing</a>
<ul>
<li><a href="#defining-test-users">Defining test users</a></li>
<li><a href="#subject-authentication">Subject authentication</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
    <br/>
    <div>
        
        
        <a href="https://github.com/seedstack/website/edit/master/content/docs/core/security.md" target="_blank"><i class="fa fa-edit"></i> Edit</a>
        
    </div>
</div>
    </div>
    <div id="footer">
        <a class="scrollup">Scroll</a>
<div class="footer-v3">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 md-margin-bottom-40">
                    <div class="headline"><h2>About</h2></div>
                    <p class="margin-bottom-25 md-margin-bottom-40">
                        SeedStack is an opinionated, easy-to-use Java development stack for building applications and micro-services.
                    </p>
                    <p>
                        <i class="fa fa-file-text"></i> <a target="_blank" href="http://seedstack.org/docs">Docs</a>
                        <i class="fa fa-info-circle"></i> <a target="_blank" href="http://seedstack.org/javadoc">Javadoc</a>
                        <i class="fa fa-book"></i> <a target="_blank" href="http://seedstack.org/guides">Guides</a>
                        <i class="fa fa-plug"></i> <a target="_blank" href="http://seedstack.org/addons">Add-ons</a>
                        <br/>
                        <i class="fa fa-keyboard-o"></i> <a style="cursor: pointer;" onclick="seedstack.ui.openHelp();">Keyboard shortcuts</a>
                    </p>
                </div>

                <div class="col-md-4 md-margin-bottom-40">
                    <div class="posts">
                        <div class="headline"><h2>License and credits</h2></div>
                        <p>
                            Code licensed under the <a href="https://www.mozilla.org/MPL/2.0" target="_blank">Mozilla Public License 2.0</a>.
                            <br/>
                            Documentation licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.
                            <br/>
                            Some illustrations by <a href="https://www.Vecteezy.com/">www.Vecteezy.com</a>
                        </p>
                    </div>
                </div>

                <div class="col-md-4 map-img">
                    <div class="headline"><h2>Contact us</h2></div>
                    <address>
                        <p>
                            <i class="fa fa-stack-overflow"></i> <a target="_blank" href="http://stackoverflow.com/questions/ask?tags=seedstack">StackOverflow</a>
                            <br/>
                            <i class="fa fa-comments"></i> <a target="_blank" href="https://kiwiirc.com/client/irc.freenode.net#seedstack">IRC</a>
                            <br/>
                            <i class="fa fa-github"></i> <a target="_blank" href="https://github.com/seedstack">GitHub</a>
                            <br/>
                            <i class="fa fa-link"></i> <a target="_blank" href="https://projects.ow2.org/bin/view/seedstack/">OW2</a>
                        </p>
                    </address>

                    <div class="headline"><h2>Stay in touch</h2></div>
                    <div style="margin-bottom: 20px;">
                        <a class="twitter-follow-button"
                           href="https://twitter.com/seedstack"
                           data-show-count="false"
                           data-size="large"
                           data-lang="en">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    </div>
    <div id="hotkeys-modal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Keyboard shortcuts</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <table class="keyboard-mappings">
                            <tbody>
                            <tr>
                                <td class="keys">
                                    <kbd>?</kbd>
                                </td>
                                <td>Show this help dialog</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>/</kbd>
                                </td>
                                <td>Focus the search field</td>
                            </tr>
                            <tr style="height: 20px;"><td></td></tr>
                            <tr>
                                <td class="keys">
                                    <kbd><i class="fa fa-arrow-left"></i></kbd>
                                </td>
                                <td>Go to previous page</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd><i class="fa fa-arrow-right"></i></kbd>
                                </td>
                                <td>Go to next page</td>
                            </tr>
                            <tr style="height: 20px;"><td></td></tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>d</kbd>
                                </td>
                                <td>Go to documentation</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>a</kbd>
                                </td>
                                <td>Go to add-ons library</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>g</kbd>
                                </td>
                                <td>Go to guides list</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="versions-modal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 id="versions-title" class="modal-title">Fetching components...</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <table id="versions-table" class="table table-striped table-hover table-bordered">
                            <tr>
                                <th>Component</th>
                                <th>Version</th>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css">

    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/gradle.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.1.0/highlightjs-line-numbers.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/mousetrap/1.4.6/mousetrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
<script src="/js/jquery.highlight.js"></script>
<script src="/js/seedstack.js"></script>
<script>
    $(document).ready(function () {
        var $search = $('.search-btn');

        $('.search').click(function () {
            if ($search.hasClass('fa-search')) {
                seedstack.ui.openSearch();
            } else {
                seedstack.ui.closeSearch();
            }
        });

        function hideJavaImports(block) {
            $(block).filter('.language-java')
                .find('table > tbody > tr')
                .each(function (i, javaLine) {
                    var $javaLine = $(javaLine);
                    var code = $javaLine.find("td.hljs-ln-code div.hljs-ln-line").text();
                    if (/^package/.test(code) || /^import/.test(code) || code.trim().length === 0) {
                        $javaLine.hide();
                    } else {
                        return false;
                    }
                });
        }

        $('pre code').each(function (i, block) {
            hljs.highlightBlock(block);

            if ($(block).not('.no-linenums').length > 0) {
                hljs.lineNumbersBlock(block);
                
                var lastLine = $(block).find('table > tbody > tr:last');
                if (lastLine.text().trim() === "") {
                    lastLine.remove();
                }
            }

            
            hideJavaImports(block);
        });

        
        $('.doc-content h2, .doc-content h3').each(function () {
            $(this).append(" <a class='title-anchor' href='#" + this.id + "'>#</a>");
        });

        Mousetrap.bind('/', function () {
            seedstack.ui.openSearch();
            return false;
        });

        Mousetrap.bind('left', function () {
            if (seedstack.state.previousPage) {
                window.location = seedstack.state.previousPage;
            }
            return false;
        });

        Mousetrap.bind('right', function () {
            if (seedstack.state.nextPage) {
                window.location = seedstack.state.nextPage;
            }
            return false;
        });

        Mousetrap.bind('?', function () {
            seedstack.ui.openHelp();
            return false;
        });

        Mousetrap.bind('esc', function () {
            seedstack.ui.closeHelp();
            seedstack.ui.closeSearch();
            seedstack.ui.closeVersions();
            return false;
        });

        var originalCallback = Mousetrap.stopCallback;
        Mousetrap.stopCallback = function (e, element, combo) {
            if (combo === 'esc') {
                return false;
            }

            return originalCallback(e, element, combo);
        };

        function bindShortcuts(value) {
            $.each(value, function (sequence, item) {
                if (typeof item === 'string') {
                    Mousetrap.bind("g " + sequence, function () {
                        window.location = item;
                        return false;
                    });
                } else if (typeof item === 'object') {
                    Mousetrap.bind("g " + sequence, function () {
                        window.location = item.path;
                        return false;
                    });
                    if (item.shortcuts && location.pathname.indexOf(item.path) === 0) {
                        bindShortcuts(item.shortcuts);
                    }
                }
            });
        }

        bindShortcuts(seedstack.ui.shortcuts);

        $('.quick-paste span').each(function (index, element) {
            $(element).attr({"id": "quick-paste-line"});
            $(element).append("<span data-toggle=\"tooltip\" data-placement=\"top\" data-title=\"Copy\" data-clipboard-target=\"#quick-paste-line\" class=\"copy-button\"><i class=\"fa fa-clipboard\"></i></span>");
        });
        var preId = 0;
        $('.doc-content pre').each(function (index, element) {
            preId++;
            $(element).attr({"id": "snippet-" + preId});
            $(element).prepend("<span data-toggle=\"tooltip\" data-placement=\"left\" data-title=\"Copy\" data-clipboard-target=\"#snippet-" + preId + "\" class=\"copy-button\"><i class=\"fa fa-clipboard\"></i></span>");
        });
        var clipboard = new Clipboard('.copy-button', {
            target: function (trigger) {
                var elt = $($(trigger).data('clipboard-target'));
                elt.find('code > table > tbody > tr').show();
                return elt.get(0);
            }
        });
        clipboard.on('success', function (e) {
            var elt = $($(e.trigger).data('clipboard-target'));
            hideJavaImports($(elt).children("code"));

            var tooltip = $("body #" + $(e.trigger).attr("aria-describedby"));
            tooltip.css('left', '-=14px');
            tooltip.children(".tooltip-inner").html("Copied!");
            e.clearSelection();
        });
        clipboard.on('error', function (e) {
            var tooltip = $("body #" + $(e.trigger).attr("aria-describedby"));
            tooltip.css('left', '-=83px');
            tooltip.children(".tooltip-inner").html("Error! Copy manually");
        });

        $('[data-toggle="tooltip"]').tooltip({
            container: 'body'
        });

        $('#hotkeys-modal, #versions-modal').bind('hidden.bs.modal', function () {
            $("html").css("margin-right", "0px");
        }).bind('show.bs.modal', function () {
            $("html").css("margin-right", "-15px");
        });

        var query = seedstack.strings.parseQueryString(location);
        if (query.h && query.h.length > 0) {
            $('.doc-content').highlight(query.h);
            if (query.scroll) {
                var firstOccurence = $('span[class=highlight]:first');
                if (firstOccurence.length > 0) {
                    $('html, body').animate({
                        scrollTop: firstOccurence.offset().top - 20
                    }, 250);
                }
            }
        }

        $(window).scroll(function () {
            if ($(this).scrollTop() > 200) {
                $('.scrollup').fadeIn();
            } else {
                $('.scrollup').fadeOut();
            }
        });

        $('.scrollup').click(function () {
            $("html, body").animate({scrollTop: 0}, 250);
            return false;
        });
    });
</script>
<script>window.twttr = (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);
    t._e = [];
    t.ready = function (f) {
        t._e.push(f);
    };
    return t;
}(document, "script", "twitter-wjs"));</script>

</body>
</html>