<!DOCTYPE html>
<html lang="en">
<head>
    
    


    


<title>
    21.4 release notes
</title>
<meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">



<link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,700,300,400" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="http://seedstack.org/assets/unify/css/style.css">
<link rel="stylesheet" href="http://seedstack.org/assets/unify/plugins/font-awesome/css/font-awesome.css">
<link rel="stylesheet" href="http://seedstack.org/css/style.css">



<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "url": "http://seedstack.org",
  "logo": "http://seedstack.org/img/logos/seedstack.png"
}
</script>



<meta property="og:title" content='21.4 release notes' />
<meta property="og:description" content="We are happy to announce the release of SeedStack 21.4 «Xylobium»." />
<meta property="og:url" content="http://seedstack.org/posts/21.4-release-notes/" />
<meta property="og:site_name" content="SeedStack" />
<meta property="og:image" content="http://seedstack.org/img/opengraph.png" />



<link rel="search" type="application/opensearchdescription+xml" href="http://seedstack.org/opensearch.xml" title="SeedStack" />



<link rel="apple-touch-icon" sizes="57x57" href="http://seedstack.org/img/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="http://seedstack.org/img/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://seedstack.org/img/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="http://seedstack.org/img/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://seedstack.org/img/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="http://seedstack.org/img/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="http://seedstack.org/img/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="http://seedstack.org/img/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://seedstack.org/img/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="http://seedstack.org/img/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="http://seedstack.org/img/favicons/manifest.json">
<meta name="apple-mobile-web-app-title" content="SeedStack">
<meta name="application-name" content="SeedStack">
<meta name="msapplication-TileColor" content="#00a300">
<meta name="msapplication-TileImage" content="/img/favicons/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">



<script type="text/javascript">
    window.seedstack = {
        baseUrl: "http:\/\/seedstack.org\/",
        state: {}
    };
</script>


</head>
<body>

<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5R5FP9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5R5FP9');</script>


<div id="header">
    
    

<div class="header">
    <div class="container">
        <a class="logo" href="http://seedstack.org/">SeedStack</a>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="fa fa-bars"></span>
        </button>
    </div>
    <div class="collapse navbar-collapse navbar-responsive-collapse" data-role="navigation" style="pointer-events: none;">
        <div class="container">
            <ul class="nav navbar-nav" style="pointer-events: auto;">
                <li class=''>
                    <a href="http://seedstack.org/docs">Documentation</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/guides">Guides</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/addons">Add-ons</a>
                </li>
                <li class='active'>
                    <a href="http://seedstack.org/posts">News</a>
                </li>
                <li class=''>
                    <a href="http://seedstack.org/community">Community</a>
                </li>
                <li class='dropdown '>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">
                        More
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="http://seedstack.org/glossary">Glossary</a></li>
                        <li><a href="http://seedstack.org/tags">Tags</a></li>
                        <li><a href="http://seedstack.org/project">Project info</a></li>
                        <li><a target="_blank" href="http://seedstack.org/javadoc"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> Javadoc</a></li>
                        <li><a target="_blank" href="https://github.com/seedstack/distribution/releases"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> Releases</a></li>
                        <li><a target="_blank" href="https://github.com/seedstack"><i style="margin-top: 3px" class="pull-right fa fa-external-link"></i> GitHub</a></li>
                    </ul>
                </li>
                <li>
                    <i class="search fa fa-search search-btn"></i>
                    <div class="search-open">
                        <form method="GET" action="http://seedstack.org/search">
                            <div class="input-group animated fadeInDown">
                                <input id="search-field" type="text" class="form-control" placeholder="Search" name="q">
                                <span class="input-group-btn">
                                    <button class="btn-u" type="submit">Go</button>
                                </span>
                            </div>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>


    <div class="title-header small">
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12">
                <h1>News</h1>
                <p class="hidden-xs">Updates and information about SeedStack.</p>
            </div>
            <div class="col-md-3 hidden-sm hidden-xs">
                <div class="header-image-wrapper">
                    <img class="header-image" src="http://seedstack.org/img/logos/news-logo.svg">
                </div>
            </div>
        </div>
    </div>
</div>
    <div class="title-subheader">
        <div class="container">
            <ul>
                <li><span><i class="fa fa-chevron-left"></i> <a href="http://seedstack.org/posts">Back to list</a></span></li>
            </ul>
        </div>
    </div>
</div>
<div id="content" class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="content-wrapper">
                <div class="doc-content">
                    <p>We are happy to announce the release of SeedStack 21.4 «Xylobium».</p>

<h2 id="new-features">New features</h2>

<h3 id="check-tool">Check tool</h3>

<p>The new <code>check</code> tool detects and displays discrepancies between the provided, and the expected configuration. It will
tell you about keys that don&rsquo;t match any configuration object, spotting possible misconfiguration. To run it in a
development environment, use the Maven goal:</p>

<pre><code class="language-bash">mvn seedstack:check
</code></pre>

<p>In a production environment you can run it with the <code>seedstack.tool</code> launch property:</p>

<pre><code class="language-bash">java -Dseedstack.tool=check -jar my-app.jar
</code></pre>

<h3 id="business-framework-improvements">Business framework improvements</h3>

<p>The <code>FluentAssembler</code> DSL now supports qualifiers for repositories and factories:</p>

<pre><code class="language-java">public class SomeClass {
    @Inject
    private FluentAssembler fluentAssembler;
    
    public void someMethod() {
        Order aggregateRoot = fluentAssembler.merge(dto)
                .into(Order.class)
                .fromRepository(Jpa.class)
                .orFromFactory(&quot;myCustomFactory&quot;);
    }
}
</code></pre>

<h3 id="misc">Misc</h3>

<p>Various other features are provided:</p>

<ul>
<li>Support for Java 15</li>
<li>In Feign add-on, configuration support for retrying logic including injectable custom retrying logic.</li>
<li>In ElasticSearch add-on, wide support for ElasticSearch client (v2 to v7).</li>
<li>In Flyway add-on, upgrade to Flyway 7.8.2 and increase configuration options.</li>
<li>In JPA add-on, support for buffered sequence generators (improve performance by reserving a range of identifiers).</li>
<li>In Redis add-on, support for Redis clusters.</li>
</ul>

<h2 id="fixes">Fixes</h2>

<h3 id="security-fixes">Security fixes</h3>

<p>Shiro was upgraded to 1.7.1, fixing CVE-2020-11989, CVE-2020-17510, CVE-2020-1957, CVE-2020-13933 and CVE-2019-12422.</p>

<p>The OAuth add-on now properly processes array claims for roles and permissions. An error 500 returned in the case
of an invalid token was also fixed. Invalid token now return 401 codes (as mandated by the spec) instead of 403. The
reason of the 401 is disclosed to the client by default but can be kept secret by setting <code>discloseUnauthorizedReason</code>
to <code>true</code>.</p>

<h3 id="configuration-fixes">Configuration fixes</h3>

<p>Configuration evaluation (macros, functions, &hellip;) in <code>classes</code> section was not working at all and is now fixed.
Another problem was that configuration arrays containing generic components (like Class[]) were ignored and not
mapped to configuration objects. This is now also fixed.</p>

<h3 id="misc-1">Misc</h3>

<p>This version also contains fixes in various components, please check individual component change logs for details.</p>

<h2 id="changes">Changes</h2>

<h3 id="library-upgrades">Library upgrades</h3>

<p>Various major libraries were upgraded:</p>

<ul>
<li>Guice to 5.0.1</li>
<li>Jersey to 2.34</li>
<li>Javassist to 3.27.0-GA</li>
<li>Guava to 30.1.1-jre</li>
<li>Flyway to 7.8.2</li>
</ul>

<h3 id="misc-2">Misc</h3>

<p>This version also contains changes in various components, please check individual component change logs for details.</p>

<h2 id="component-versions">Component versions</h2>

<h3 id="general">General</h3>

<ul>
<li><strong>[chg]</strong> seedstack-maven-plugin: <strong><a href="https://github.com/seedstack/seedstack-maven-plugin/releases/tag/v2.8.0">2.8.0</a></strong></li>
</ul>

<h3 id="core">Core</h3>

<ul>
<li>shed: <strong><a href="https://github.com/seedstack/shed/releases/tag/v1.1.6">1.1.6</a></strong></li>
<li><strong>[chg]</strong> coffig: <strong><a href="https://github.com/seedstack/coffig/releases/tag/v3.1.7">3.1.7</a></strong></li>
<li><strong>[chg]</strong> seed: <strong><a href="https://github.com/seedstack/seed/releases/tag/v3.12.0">3.12.0</a></strong></li>
<li><strong>[chg]</strong> business: <strong><a href="https://github.com/seedstack/business/releases/tag/v4.4.0">4.4.0</a></strong></li>
</ul>

<h3 id="add-ons">Add-ons</h3>

<ul>
<li>audit-addon: <strong><a href="https://github.com/seedstack/audit-addon/releases/tag/v3.0.1">3.0.1</a></strong></li>
<li>aws-addon: <strong><a href="https://github.com/seedstack/aws-addon/releases/tag/v1.0.0">1.0.0</a></strong></li>
<li>cci-addon: <strong><a href="https://github.com/seedstack/cci-addon/releases/tag/v1.1.0">1.1.0</a></strong></li>
<li>camel-addon: <strong><a href="https://github.com/seedstack/camel-addon/releases/tag/v1.0.0">1.0.0</a></strong></li>
<li>consul-addon: <strong><a href="https://github.com/seedstack/consul-addon/releases/tag/v1.0.0">1.0.0</a></strong></li>
<li>crud-addon: <strong><a href="https://github.com/seedstack/crud-addon/releases/tag/v1.0.1">1.0.1</a></strong></li>
<li>data-security-addon: <strong><a href="https://github.com/seedstack/data-security-addon/releases/tag/v1.0.0">1.0.0</a></strong></li>
<li><strong>[chg]</strong> elasticsearch-addon: <strong><a href="https://github.com/seedstack/elasticsearch-addon/releases/tag/v3.1.0">3.1.0</a></strong></li>
<li><strong>[chg]</strong> feign-addon: <strong><a href="https://github.com/seedstack/feign-addon/releases/tag/v1.5.0">1.5.0</a></strong></li>
<li><strong>[chg]</strong> flyway-addon: <strong><a href="https://github.com/seedstack/flyway-addon/releases/tag/v2.0.0">2.0.0</a></strong></li>
<li>i18n-addon: <strong><a href="https://github.com/seedstack/i18n-addon/releases/tag/v4.0.2">4.0.2</a></strong></li>
<li>io-addon: <strong><a href="https://github.com/seedstack/io-addon/releases/tag/v3.0.1">3.0.1</a></strong></li>
<li>javamail-addon: <strong><a href="https://github.com/seedstack/javamail-addon/releases/tag/v3.0.0">3.0.0</a></strong></li>
<li>jcache-addon: <strong><a href="https://github.com/seedstack/jcache-addon/releases/tag/v3.0.0">3.0.0</a></strong></li>
<li>jcr-addon: <strong><a href="https://github.com/seedstack/jcr-addon/releases/tag/v1.0.0">1.0.0</a></strong></li>
<li>jdbc-addon: <strong><a href="https://github.com/seedstack/jdbc-addon/releases/tag/v3.0.3">3.0.3</a></strong></li>
<li>jmh-addon: <strong><a href="https://github.com/seedstack/jmh-addon/releases/tag/v1.0.2">1.0.2</a></strong></li>
<li>jms-addon: <strong><a href="https://github.com/seedstack/jms-addon/releases/tag/v3.1.1">3.1.1</a></strong></li>
<li><strong>[chg]</strong> jpa-addon: <strong><a href="https://github.com/seedstack/jpa-addon/releases/tag/v4.2.0">4.2.0</a></strong></li>
<li>kafka-addon: <strong><a href="https://github.com/seedstack/kafka-addon/releases/tag/v2.0.2">2.0.2</a></strong></li>
<li>ldap-addon: <strong><a href="https://github.com/seedstack/ldap-addon/releases/tag/v3.0.0">3.0.0</a></strong></li>
<li>metrics-addon: <a href="https://github.com/seedstack/metrics-addon/releases/tag/v1.1.0">1.1.0</a></li>
<li>modelmapper-addon: <strong><a href="https://github.com/seedstack/modelmapper-addon/releases/tag/v1.0.0">1.0.0</a></strong></li>
<li>mongodb-addon: <strong><a href="https://github.com/seedstack/mongodb-addon/releases/tag/v3.1.2">3.1.2</a></strong></li>
<li>monitoring-addon: <strong><a href="https://github.com/seedstack/monitoring-addon/releases/tag/v3.1.0">3.1.0</a></strong></li>
<li>mqtt-addon: <strong><a href="https://github.com/seedstack/mqtt-addon/releases/tag/v2.0.1">2.0.1</a></strong></li>
<li>neo4j-addon: <strong><a href="https://github.com/seedstack/neo4j-addon/releases/tag/v2.0.0">2.0.0</a></strong></li>
<li>netflix-addon: <strong><a href="https://github.com/seedstack/netflix-addon/releases/tag/v1.2.2">1.2.2</a></strong></li>
<li><strong>[chg]</strong> oauth-addon: <strong><a href="https://github.com/seedstack/oauth-addon/releases/tag/v3.2.0">3.2.0</a></strong></li>
<li><strong>[chg]</strong> redis-addon: <strong><a href="https://github.com/seedstack/redis-addon/releases/tag/v2.1.0">2.1.0</a></strong></li>
<li>scheduling-addon: <strong><a href="https://github.com/seedstack/scheduling-addon/releases/tag/v3.3.1">3.3.1</a></strong></li>
<li>shell-addon: <strong><a href="https://github.com/seedstack/shell-addon/releases/tag/v1.0.1">1.0.1</a></strong></li>
<li>solr-addon: <strong><a href="https://github.com/seedstack/solr-addon/releases/tag/v2.0.0">2.0.0</a></strong></li>
<li>spring-bridge-addon: <strong><a href="https://github.com/seedstack/spring-bridge-addon/releases/tag/v3.1.2">3.1.2</a></strong></li>
<li>swagger-addon: <strong><a href="https://github.com/seedstack/swagger-addon/releases/tag/v2.1.2">2.1.2</a></strong></li>
<li>w20-bridge-addon: <strong><a href="https://github.com/seedstack/w20-bridge-addon/releases/tag/v3.2.8">3.2.8</a></strong></li>
<li>web-bridge-addon: <strong><a href="https://github.com/seedstack/web-bridge-addon/releases/tag/v1.0.4">1.0.4</a></strong></li>
<li>web-services-addon: <strong><a href="https://github.com/seedstack/web-services-addon/releases/tag/v3.0.4">3.0.4</a></strong></li>
</ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="toc">
    <div class="toc" data-spy="affix" data-offset-top="314" data-offset-bottom="336">
    <div>
        
    </div>
    <br/>
    <div>
        <p class="title">On this page</p>
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#new-features">New features</a>
<ul>
<li><a href="#check-tool">Check tool</a></li>
<li><a href="#business-framework-improvements">Business framework improvements</a></li>
<li><a href="#misc">Misc</a></li>
</ul></li>
<li><a href="#fixes">Fixes</a>
<ul>
<li><a href="#security-fixes">Security fixes</a></li>
<li><a href="#configuration-fixes">Configuration fixes</a></li>
<li><a href="#misc-1">Misc</a></li>
</ul></li>
<li><a href="#changes">Changes</a>
<ul>
<li><a href="#library-upgrades">Library upgrades</a></li>
<li><a href="#misc-2">Misc</a></li>
</ul></li>
<li><a href="#component-versions">Component versions</a>
<ul>
<li><a href="#general">General</a></li>
<li><a href="#core">Core</a></li>
<li><a href="#add-ons">Add-ons</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
    <br/>
    <div>
        
        
        <a href="https://github.com/seedstack/website/edit/master/content/posts/21-4-release-notes.md" target="_blank"><i class="fa fa-edit"></i> Edit</a>
        
    </div>
</div>
</div>
<div id="footer">
    <a class="scrollup">Scroll</a>
<div class="footer-v3">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 md-margin-bottom-40">
                    <div class="headline"><h2>About</h2></div>
                    <p class="margin-bottom-25 md-margin-bottom-40">
                        SeedStack is an opinionated, easy-to-use Java development stack for building applications and micro-services.
                    </p>
                    <p>
                        <i class="fa fa-file-text"></i> <a target="_blank" href="http://seedstack.org/docs">Docs</a>
                        <i class="fa fa-info-circle"></i> <a target="_blank" href="http://seedstack.org/javadoc">Javadoc</a>
                        <i class="fa fa-book"></i> <a target="_blank" href="http://seedstack.org/guides">Guides</a>
                        <i class="fa fa-plug"></i> <a target="_blank" href="http://seedstack.org/addons">Add-ons</a>
                        <br/>
                        <i class="fa fa-keyboard-o"></i> <a style="cursor: pointer;" onclick="seedstack.ui.openHelp();">Keyboard shortcuts</a>
                    </p>
                </div>

                <div class="col-md-4 md-margin-bottom-40">
                    <div class="posts">
                        <div class="headline"><h2>License and credits</h2></div>
                        <p>
                            Code licensed under the <a href="https://www.mozilla.org/MPL/2.0" target="_blank">Mozilla Public License 2.0</a>.
                            <br/>
                            Documentation licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.
                            <br/>
                            Some illustrations by <a href="https://www.Vecteezy.com/">www.Vecteezy.com</a>
                        </p>
                    </div>
                </div>

                <div class="col-md-4 map-img">
                    <div class="headline"><h2>Contact us</h2></div>
                    <address>
                        <p>
                            <i class="fa fa-stack-overflow"></i> <a target="_blank" href="http://stackoverflow.com/questions/ask?tags=seedstack">StackOverflow</a>
                            <br/>
                            <i class="fa fa-comments"></i> <a target="_blank" href="https://kiwiirc.com/client/irc.freenode.net#seedstack">IRC</a>
                            <br/>
                            <i class="fa fa-github"></i> <a target="_blank" href="https://github.com/seedstack">GitHub</a>
                            <br/>
                            <i class="fa fa-link"></i> <a target="_blank" href="https://projects.ow2.org/bin/view/seedstack/">OW2</a>
                        </p>
                    </address>

                    <div class="headline"><h2>Stay in touch</h2></div>
                    <div style="margin-bottom: 20px;">
                        <a class="twitter-follow-button"
                           href="https://twitter.com/seedstack"
                           data-show-count="false"
                           data-size="large"
                           data-lang="en">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</div>
<div id="hotkeys-modal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Keyboard shortcuts</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <table class="keyboard-mappings">
                            <tbody>
                            <tr>
                                <td class="keys">
                                    <kbd>?</kbd>
                                </td>
                                <td>Show this help dialog</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>/</kbd>
                                </td>
                                <td>Focus the search field</td>
                            </tr>
                            <tr style="height: 20px;"><td></td></tr>
                            <tr>
                                <td class="keys">
                                    <kbd><i class="fa fa-arrow-left"></i></kbd>
                                </td>
                                <td>Go to previous page</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd><i class="fa fa-arrow-right"></i></kbd>
                                </td>
                                <td>Go to next page</td>
                            </tr>
                            <tr style="height: 20px;"><td></td></tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>d</kbd>
                                </td>
                                <td>Go to documentation</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>a</kbd>
                                </td>
                                <td>Go to add-ons library</td>
                            </tr>
                            <tr>
                                <td class="keys">
                                    <kbd>g</kbd> <kbd>g</kbd>
                                </td>
                                <td>Go to guides list</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="versions-modal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 id="versions-title" class="modal-title">Fetching components...</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <table id="versions-table" class="table table-striped table-hover table-bordered">
                            <tr>
                                <th>Component</th>
                                <th>Version</th>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css">

<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/gradle.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.1.0/highlightjs-line-numbers.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/mousetrap/1.4.6/mousetrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
<script src="/js/jquery.highlight.js"></script>
<script src="/js/seedstack.js"></script>
<script>
    $(document).ready(function () {
        var $search = $('.search-btn');

        $('.search').click(function () {
            if ($search.hasClass('fa-search')) {
                seedstack.ui.openSearch();
            } else {
                seedstack.ui.closeSearch();
            }
        });

        function hideJavaImports(block) {
            $(block).filter('.language-java')
                .find('table > tbody > tr')
                .each(function (i, javaLine) {
                    var $javaLine = $(javaLine);
                    var code = $javaLine.find("td.hljs-ln-code div.hljs-ln-line").text();
                    if (/^package/.test(code) || /^import/.test(code) || code.trim().length === 0) {
                        $javaLine.hide();
                    } else {
                        return false;
                    }
                });
        }

        $('pre code').each(function (i, block) {
            hljs.highlightBlock(block);

            if ($(block).not('.no-linenums').length > 0) {
                hljs.lineNumbersBlock(block);
                
                var lastLine = $(block).find('table > tbody > tr:last');
                if (lastLine.text().trim() === "") {
                    lastLine.remove();
                }
            }

            
            hideJavaImports(block);
        });

        
        $('.doc-content h2, .doc-content h3').each(function () {
            $(this).append(" <a class='title-anchor' href='#" + this.id + "'>#</a>");
        });

        Mousetrap.bind('/', function () {
            seedstack.ui.openSearch();
            return false;
        });

        Mousetrap.bind('left', function () {
            if (seedstack.state.previousPage) {
                window.location = seedstack.state.previousPage;
            }
            return false;
        });

        Mousetrap.bind('right', function () {
            if (seedstack.state.nextPage) {
                window.location = seedstack.state.nextPage;
            }
            return false;
        });

        Mousetrap.bind('?', function () {
            seedstack.ui.openHelp();
            return false;
        });

        Mousetrap.bind('esc', function () {
            seedstack.ui.closeHelp();
            seedstack.ui.closeSearch();
            seedstack.ui.closeVersions();
            return false;
        });

        var originalCallback = Mousetrap.stopCallback;
        Mousetrap.stopCallback = function (e, element, combo) {
            if (combo === 'esc') {
                return false;
            }

            return originalCallback(e, element, combo);
        };

        function bindShortcuts(value) {
            $.each(value, function (sequence, item) {
                if (typeof item === 'string') {
                    Mousetrap.bind("g " + sequence, function () {
                        window.location = item;
                        return false;
                    });
                } else if (typeof item === 'object') {
                    Mousetrap.bind("g " + sequence, function () {
                        window.location = item.path;
                        return false;
                    });
                    if (item.shortcuts && location.pathname.indexOf(item.path) === 0) {
                        bindShortcuts(item.shortcuts);
                    }
                }
            });
        }

        bindShortcuts(seedstack.ui.shortcuts);

        $('.quick-paste span').each(function (index, element) {
            $(element).attr({"id": "quick-paste-line"});
            $(element).append("<span data-toggle=\"tooltip\" data-placement=\"top\" data-title=\"Copy\" data-clipboard-target=\"#quick-paste-line\" class=\"copy-button\"><i class=\"fa fa-clipboard\"></i></span>");
        });
        var preId = 0;
        $('.doc-content pre').each(function (index, element) {
            preId++;
            $(element).attr({"id": "snippet-" + preId});
            $(element).prepend("<span data-toggle=\"tooltip\" data-placement=\"left\" data-title=\"Copy\" data-clipboard-target=\"#snippet-" + preId + "\" class=\"copy-button\"><i class=\"fa fa-clipboard\"></i></span>");
        });
        var clipboard = new Clipboard('.copy-button', {
            target: function (trigger) {
                var elt = $($(trigger).data('clipboard-target'));
                elt.find('code > table > tbody > tr').show();
                return elt.get(0);
            }
        });
        clipboard.on('success', function (e) {
            var elt = $($(e.trigger).data('clipboard-target'));
            hideJavaImports($(elt).children("code"));

            var tooltip = $("body #" + $(e.trigger).attr("aria-describedby"));
            tooltip.css('left', '-=14px');
            tooltip.children(".tooltip-inner").html("Copied!");
            e.clearSelection();
        });
        clipboard.on('error', function (e) {
            var tooltip = $("body #" + $(e.trigger).attr("aria-describedby"));
            tooltip.css('left', '-=83px');
            tooltip.children(".tooltip-inner").html("Error! Copy manually");
        });

        $('[data-toggle="tooltip"]').tooltip({
            container: 'body'
        });

        $('#hotkeys-modal, #versions-modal').bind('hidden.bs.modal', function () {
            $("html").css("margin-right", "0px");
        }).bind('show.bs.modal', function () {
            $("html").css("margin-right", "-15px");
        });

        var query = seedstack.strings.parseQueryString(location);
        if (query.h && query.h.length > 0) {
            $('.doc-content').highlight(query.h);
            if (query.scroll) {
                var firstOccurence = $('span[class=highlight]:first');
                if (firstOccurence.length > 0) {
                    $('html, body').animate({
                        scrollTop: firstOccurence.offset().top - 20
                    }, 250);
                }
            }
        }

        $(window).scroll(function () {
            if ($(this).scrollTop() > 200) {
                $('.scrollup').fadeIn();
            } else {
                $('.scrollup').fadeOut();
            }
        });

        $('.scrollup').click(function () {
            $("html, body").animate({scrollTop: 0}, 250);
            return false;
        });
    });
</script>
<script>window.twttr = (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);
    t._e = [];
    t.ready = function (f) {
        t._e.push(f);
    };
    return t;
}(document, "script", "twitter-wjs"));</script>

</body>
</html>
